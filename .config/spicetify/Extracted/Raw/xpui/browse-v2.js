"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3817],{40771:(e,n,i)=>{i.d(n,{Z:()=>s});var t=i(67892),a=i(85893);const s=({href:e,children:n,...i})=>(0,a.jsx)(t.Z,{to:e,...i,children:n})},8890:(e,n,i)=>{i.d(n,{T:()=>r});var t=i(36590),a=i(8498),s=i(85893);const r=({name:e,uri:n,href:i,images:r,isHero:o,testId:l,description:d,index:c,requestId:m,color:u})=>(0,s.jsx)(t.C,{index:c,featureIdentifier:"merch",onClick:()=>{window.location.href=i},headerText:e,uri:n,isPlayable:!1,renderCardImage:()=>(0,s.jsx)(a.x,{isHero:o,images:r,color:u}),renderSubHeaderContent:()=>(0,s.jsx)("span",{children:d||""}),testId:l,requestId:m,delegateNavigation:!0})},70369:(e,n,i)=>{i.d(n,{$:()=>t.$});var t=i(22578)},19241:(e,n,i)=>{i.r(n),i.d(n,{BrowsePage:()=>W});var t=i(67294),a=i(94184),s=i.n(a),r=i(14908),o=i(96206),l=i(70937),d=i(15852),c=i(38470),m=i(95888),u=i(70369),k=i(6158),p=i(18686),f=i(88767),g=i(3775),S=i(63093),b=i(45728),v=i(8982),N=(i(98984),i(54844));const h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"browsePage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"browse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pagePagination"},value:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"sectionPagination"},value:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"header"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"backgroundImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"color"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseSectionItem"}}]}}]}}]}}]}}]}},...N.N9.definitions,...N.K1.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"browseSectionItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sectionItems"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseItem"}}]}}]}}]}},...N.H5.definitions,...N.RL.definitions,...N.X6.definitions,...N.nE.definitions,...N._C.definitions,...N.Tf.definitions,...N.tl.definitions,...N.dV.definitions,...N.qJ.definitions,...N.YJ.definitions,...N.zZ.definitions,...N.Fk.definitions,...N.dK.definitions,...N.$z.definitions]};var x=i(47134),w=i(58588),y=i(86604),I=i(40771);const F="T8Vmv6htAP7bht774xG5",j="BX1DapBHMyHxwyF1aFRv";var _=i(85893);function C({section:e}){return(0,_.jsx)("div",{className:F,children:e.sectionItems.items.map((e=>function(e){return"BrowseSectionContainerWrapper"===e.content.__typename&&"BrowseSectionContainer"===e.content.data.__typename&&e.content.data.data?.cardRepresentation?.title?.transformedLabel?(0,_.jsxs)(w.A,{as:I.Z,href:(0,x.t1)(e.uri),className:j,children:[e.content.data.data.cardRepresentation.title.transformedLabel,(0,_.jsx)(y.V,{iconSize:12})]},e.uri):null}(e)))})}var P=i(73012),B=i(37081),R=i(60289),T=i(59482),O=i(72907);const D=({images:e,color:n=P.k77,title:i})=>{const t=0===e.length?R.fR.SMALL:R.fR.DEFAULT;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(R.gF,{backgroundImages:e,backgroundColor:n,size:t,children:[(0,_.jsx)(T.W,{children:i?(0,_.jsx)(O.i,{text:i}):null}),(0,_.jsx)(R.sP,{children:i?(0,_.jsx)(R.xd,{children:i}):null})]}),(0,_.jsx)(B.H,{color:n})]})};var V=i(23082),L=i(19897);const E=({uri:e,fallback:n})=>{const{section:i,error:t,fetchNextItems:a}=(0,V.X)(e),s=i?.data?.title?.transformedLabel,r=i?.sectionItems.items??[];return 0===r.length||null!==t?n():(0,_.jsx)(l.C,{onReachBottom:a,children:(0,_.jsx)(p.q,{title:s??"",index:0,id:e,showAll:!0,children:r.map(((e,n)=>(0,L.O)(e,n)))})})},A="lXcKpCtaEeFf1HifX139",M="KZy9ufUbVUdmV7qnCE2e",q="xcTrtCsYOPtSElbX9inq",W=({uri:e})=>{const{header:n,sections:i,error:a,fetchNextSections:c}=(e=>{const{request:n}=(0,t.useContext)(g.Ax),{data:i,isLoading:a,error:s,fetchNextPage:r}=(0,f.useInfiniteQuery)(["browse","page",e,{numberOfSections:10,numberOfItems:10}],(async({pageParam:i=0})=>(0,S.J)(n,h,function(e,n,i,t){return{pagePagination:{offset:n,limit:10},sectionPagination:{offset:0,limit:10},uri:e}}(e,i))),{cacheTime:b.ws,staleTime:b._p,getNextPageParam:e=>{if("BrowseSectionContainer"===e?.data.browse?.__typename)return e.data.browse.sections?.pagingInfo.nextOffset??void 0}}),o=(0,t.useCallback)((async()=>{await r()}),[r]),l=(0,t.useMemo)((()=>i?.pages?i.pages.reduce(((e,n)=>"BrowseSectionContainer"===n?.data.browse?.__typename&&n.data.browse.sections?.items?[...e,...n.data.browse.sections.items]:e),[]):[]),[i?.pages]);return{header:(0,t.useMemo)((()=>{if(i?.pages)for(const e of i.pages)if("BrowseSectionContainer"===e?.data.browse?.__typename)return{title:e.data.browse.header?.title?.transformedLabel??void 0,color:e.data.browse.header?.color?.hex??void 0,images:e.data.browse.header?.backgroundImage?.sources.map(v.N)??[]}}),[i?.pages]),sections:l,error:s,loading:a,fetchNextSections:o}})(e),{spec:p,UBIFragment:N}=(0,d.fU)(r.createDesktopGenreEventFactory,{data:{identifier:e,uri:e}}),x=(0,t.useMemo)((()=>p.shelvesFactory()),[p]);if(0===i.length||null!==a)return(0,_.jsx)(k.h,{hasError:null!==a,errorMessage:o.ag.get("error.generic")});const w=n?.title;return(0,_.jsxs)(N,{spec:p,children:[(0,_.jsx)(u.$,{children:n?.title??o.ag.get("browse")}),w?(0,_.jsx)("div",{className:A,children:(0,_.jsx)(D,{title:n.title,color:n.color,images:n.images})}):null,(0,_.jsx)(N,{spec:x,children:(0,_.jsxs)("div",{className:q,children:[w&&(0,_.jsx)(m.I,{backgroundColor:n.color}),(0,_.jsx)("div",{className:s()("contentSpacing",M),children:1===i.length?(0,_.jsx)(E,{uri:i[0].uri,fallback:()=>U(i[0],0,!0)}):(0,_.jsx)(l.C,{onReachBottom:c,children:i.map(((e,n)=>U(e,n,!1)))})})]})})]})};function U(e,n,i){switch(e.data?.__typename){case"BrowseGenericSectionData":return(0,_.jsx)(p.q,{title:e.data?.title?.transformedLabel??"",total:e.sectionItems.totalCount,seeAllUri:(0,x.px)(e.uri),index:n,id:e.uri,showAll:i,children:e.sectionItems.items.map(((e,n)=>(0,L.O)(e,n)))},e.uri);case"BrowseGridSectionData":return(0,_.jsx)(p.q,{title:e.data?.title?.transformedLabel??"",total:e.sectionItems.totalCount,index:n,id:e.uri,showAll:!0,children:e.sectionItems.items.map(((e,n)=>(0,L.O)(e,n)))},e.uri);case"BrowseRelatedSectionData":return(0,_.jsx)(C,{section:e},e.uri);case"BrowseSingleItemSectionData":case void 0:return null;default:return(0,c._)(e.data),null}}},89503:(e,n,i)=>{i.r(n),i.d(n,{BrowseSection:()=>S});var t=i(67294),a=i(94184),s=i.n(a),r=i(14908),o=i(96206),l=i(70937),d=i(15852),c=i(70369),m=i(6158),u=i(18686),k=i(23082),p=i(19897);const f="Z3ISr2E5M6kLGdC7dCDQ";var g=i(85893);const S=({uri:e})=>{const{section:n,error:i,fetchNextItems:a}=(0,k.X)(e),{spec:S,UBIFragment:b}=(0,d.fU)(r.createDesktopGenreEventFactory,{data:{identifier:e,uri:e}}),v=(0,t.useMemo)((()=>S.shelvesFactory()),[S]),N=n?.data?.title?.transformedLabel,h=n?.sectionItems.items??[];return 0===h.length||null!==i?(0,g.jsx)(m.h,{hasError:null!==i,errorMessage:o.ag.get("error.generic")}):(0,g.jsxs)(b,{spec:S,children:[(0,g.jsx)(c.$,{children:N??o.ag.get("browse")}),(0,g.jsx)(b,{spec:v,children:(0,g.jsx)("div",{className:s()("contentSpacing",f),children:(0,g.jsx)(l.C,{onReachBottom:a,children:(0,g.jsx)(u.q,{title:N??"",index:0,id:e,showAll:!0,children:h.map(((e,n)=>(0,p.O)(e,n)))})})})})]})}},19897:(e,n,i)=>{i.d(n,{O:()=>N});var t=i(38470),a=i(96206),s=i(3634),r=i(89477),o=i(51216),l=i(61864),d=i(8890),c=i(46309),m=i(30523),u=i(95332),k=i(97891),p=i(36790),f=i(7073),g=i(72169),S=i(47134),b=i(8982),v=i(85893);function N(e,n){switch(e.content.__typename){case"AlbumResponseWrapper":case"ArtistResponseWrapper":case"EpisodeOrChapterResponseWrapper":case"PlaylistResponseWrapper":case"PodcastOrAudiobookResponseWrapper":case"TrackResponseWrapper":case"UserResponseWrapper":case"BrowseXlinkResponseWrapper":case"BrowseSectionContainerWrapper":case"MerchResponseWrapper":return function(e,n,i){if("GenericError"===e.__typename||"NotFound"===e.__typename||"RestrictedContent"===e.__typename)return null;const N=(0,b._)(e);switch(e.__typename){case"Album":return(0,v.jsx)(s.r,{uri:e.uri,name:e.name,images:N,sharingInfo:null,artists:(0,g.BH)(e.artists),index:n},e.uri);case"Artist":return(0,v.jsx)(r.I,{uri:e.uri,name:e.profile.name,images:N,index:n},e.uri);case"Audiobook":return(0,v.jsx)(o.c,{uri:e.uri,name:e.name,images:N,authorName:e.authors?.map((e=>e?.name)).join(a.ag.getSeparator())??"",index:n},e.uri);case"Chapter":return(0,v.jsx)(l.B,{uri:e.uri,name:e.name,images:N,showImages:N,description:"",durationMilliseconds:e.duration.totalMilliseconds,releaseDate:(0,g.Bq)(e.releaseDate),resume_point:{resume_position_ms:e.playedState.playPositionMilliseconds,fully_played:e.playedState.state===f.sY.Completed},isExplicit:(0,g.sW)(e.contentRating),is19PlusOnly:(0,g.R7)(e.contentRating),sharingInfo:null,index:n},e.uri);case"Episode":return(0,v.jsx)(l.B,{uri:e.uri,name:e.name,images:N,showImages:N,description:e.description??"",durationMilliseconds:e.duration.totalMilliseconds,releaseDate:(0,g.Bq)(e.releaseDate),resume_point:{resume_position_ms:e.playedState.playPositionMilliseconds,fully_played:e.playedState.state===f.sY.Completed},isExplicit:(0,g.sW)(e.contentRating),is19PlusOnly:(0,g.R7)(e.contentRating),sharingInfo:null,index:n},e.uri);case"Playlist":{let i="";return"User"===e.ownerV2.data.__typename&&(i=e.ownerV2.data.name),(0,v.jsx)(c.Z,{uri:e.uri,name:e.name,images:N,description:e.description,authorName:i,index:n},e.uri)}case"Podcast":return(0,v.jsx)(u._,{uri:e.uri,name:e.name,images:N,publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,g.x7)(e.mediaType),index:n},e.uri);case"Track":return(0,v.jsx)(k.G,{uri:e.uri,name:e.name,images:N,artists:(0,g.mQ)(e.artists),album:e.albumOfTrack?{uri:e.albumOfTrack.uri,name:e.albumOfTrack.name}:null,isExplicit:(0,g.sW)(e.contentRating),is19PlusOnly:(0,g.R7)(e.contentRating),sharingInfo:null,index:n},e.uri);case"User":return(0,v.jsx)(m.P,{uri:e.uri,name:e.name,images:N,index:n},e.uri);case"BrowseSectionContainer":return(0,v.jsx)(p.p,{title:e.data?.cardRepresentation?.title?.transformedLabel??"",pageId:"search",href:(0,S.t1)(i),color:e.data?.cardRepresentation?.backgroundColor?.hex,imageUrl:N[0]?.url,ubiId:i,index:n},i);case"BrowseSpacesHub":return(0,v.jsx)(p.p,{title:e.title?.transformedLabel??"",pageId:"search",href:(0,S.wJ)(e.spaceId),color:e.backgroundColor?.hex,imageUrl:N[0]?.url,ubiId:i,index:n},i);case"BrowseClientFeature":return(0,v.jsx)(p.p,{title:e.title?.transformedLabel??"",pageId:"search",href:(0,S.t1)(i),color:e.backgroundColor?.hex,imageUrl:N[0]?.url,ubiId:i,index:n},i);case"Merch":{let t="";return null!==e.price&&"profile"in e.artists.items[0].data&&(t=a.ag.get("merch.subtitle.format",e.price,e.artists.items[0].data.profile.name)),(0,v.jsx)(d.T,{name:e.name,uri:e.uri,href:e.url||e.uri,images:[{url:e.image?.sources[0]?.url||""}],description:t,index:n},i)}case"BrowseExternalHref":return null;default:return(0,t._)(e),null}}(e.content.data,n,e.uri);case"UnknownType":case"NoContent":case"ConcertResponseWrapper":break;default:(0,t._)(e.content)}return null}},23082:(e,n,i)=>{i.d(n,{X:()=>m});i(82801),i(61295);var t=i(67294),a=i(88767),s=i(3775),r=i(63093),o=i(38470),l=i(45728),d=(i(98984),i(54844));const c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"browseSection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"browseSection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"sectionPagination"},value:{kind:"Variable",name:{kind:"Name",value:"pagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"sectionUri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sectionItems"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseItem"}}]}}]}}]}}]}}]}},...d.H5.definitions,...d.RL.definitions,...d.X6.definitions,...d.N9.definitions,...d.K1.definitions,...d.nE.definitions,...d._C.definitions,...d.Tf.definitions,...d.tl.definitions,...d.dV.definitions,...d.qJ.definitions,...d.YJ.definitions,...d.zZ.definitions,...d.Fk.definitions,...d.dK.definitions,...d.$z.definitions]},m=e=>{const{request:n}=(0,t.useContext)(s.Ax),{data:i,isLoading:d,error:m,fetchNextPage:u}=(0,a.useInfiniteQuery)(["browse","section",e,{numberOfItems:20}],(async({pageParam:i=0})=>(0,r.J)(n,c,function(e,n,i){return{pagination:{offset:n,limit:i},uri:e}}(e,i,20))),{cacheTime:l.ws,staleTime:l._p,getNextPageParam:e=>{if("BrowseSection"===e?.data.browseSection?.__typename)return e.data.browseSection.sectionItems.pagingInfo.nextOffset??void 0}}),k=(0,t.useCallback)((async()=>{await u()}),[u]);return{section:(0,t.useMemo)((()=>i?.pages?i.pages.reduce(((e,n)=>{if(!n?.data.browseSection)return e;switch(n.data.browseSection.__typename){case"BrowseSection":return null===e?function(e){if("object"!=typeof e||null===e)return e;if(window.structuredClone)return window.structuredClone(e);return JSON.parse(JSON.stringify(e))}(n.data.browseSection):(e.sectionItems.items=[...e.sectionItems.items,...n.data.browseSection.sectionItems.items],e);case"GenericError":case"NotFound":return e;default:return(0,o._)(n.data.browseSection),e}}),null):null),[i?.pages]),error:m,loading:d,fetchNextItems:k}}},70937:(e,n,i)=>{i.d(n,{C:()=>c});var t=i(67294),a=i(97650),s=i(94184),r=i.n(s);const o="eqw9lvuoZHrkWMTdyTpY",l="lb08f71wES9AQnKx6e0R";var d=i(85893);const c=t.memo((function(e){const{triggerOnInitialLoad:n=!1,onReachBottom:i,showScrollbar:s=!0,horizontalScroll:c=!1,className:m}=e,{ref:u,inView:k}=(0,a.YD)({initialInView:n});return(0,t.useEffect)((()=>{k&&i&&i()}),[k,i]),(0,d.jsxs)("div",{className:r()({[l]:!s,[o]:c},m),"data-testid":"infinite-scroll-list",children:[e.children,(0,d.jsx)("div",{ref:u})]})}))}}]);
//# sourceMappingURL=browse-v2.js.map