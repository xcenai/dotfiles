"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[1289],{61112:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ce});var s=i(67294),a=i(6695),r=i(96206),l=i(30731),n=i(6158),o=i(1838),u=i(22423),c=i(47032),d=i(38911),g=i(4236),m=i(61901),y=i(45342),p=i(84242),x=i(89952),h=i(70369),f=i(23609),b=i(18270),P=i(55120),j=i(64971),E=i(4383),C=i(74483);const A={[C.yW.NAME]:o.hI.TITLE,[C.yW.SHOW_NAME]:o.hI.SHOW,[C.yW.ADDED_AT]:o.hI.ADDED_AT},k=[d.oT.ADDED_AT,d.oT.CREATOR_NAME,d.oT.EPISODE_ALPHABETICAL],I={[d.oT.ADDED_AT]:{field:C.yW.ADDED_AT,order:C.As.DESC},[d.oT.CREATOR_NAME]:{field:C.yW.SHOW_NAME,order:C.As.ASC},[d.oT.EPISODE_ALPHABETICAL]:{field:C.yW.NAME,order:C.As.ASC}},S=e=>{if(k.includes(e))return I[e]},T=e=>{if(!k.includes(e))return;const t=S(e);if(!t?.field)return;const i=A[t.field];if(!i)return;return o.Vd[i].map((e=>t.order?`${e} ${t.order}`:e)).join(",")},D="m9xwK71Ieq9cySIq4FAP",_="PkEMTu8sGqJeQWJ7HvEs",N="DbH2KkRA8yVWWpXGaNSW";var w=i(85893);const O=({metadata:e,canSort:t,backgroundColor:i,isPlaying:s,isOnline:a,togglePlay:l})=>{const n=(0,E.y)(),{uri:o,name:u}=e,c=e.totalLength>0;return(0,w.jsx)(b.o,{backgroundColor:i,children:(0,w.jsxs)(b.F,{children:[c&&(0,w.jsx)(P.$,{onClick:()=>l(),isPlaying:s,size:"lg",uri:o,disabled:!a,ariaPlayLabel:r.ag.get("playlist.a11y.play",u),ariaPauseLabel:r.ag.get("playlist.a11y.pause",u)}),t&&(0,w.jsx)("div",{className:N,children:(0,w.jsx)(j.h,{canSort:n.getCapabilities().canSort,canFilter:n.getCapabilities().canFilter,filterPlaceholder:r.ag.get("playlist.search_in_playlist"),sortOptions:k})})]})})};var v=i(70937),R=i(42922),L=i(18864),M=i(25988),U=i(91753),W=i(88435),$=i(56294),H=i(57784),F=i(26492),z=i(18261),G=i(87257),q=i(57978),B=i(8341),K=i(5944),Q=i(42781),V=i(84788),Z=i(67062),J=i(43028);const X={small:64,standard:300,large:640,xlarge:1024},Y=s.memo((function({index:e,contextUri:t,episode:i,onRemove:a,usePlayContextItem:r}){const l=(0,s.useRef)(i.duration.milliseconds-i.timeLeft.milliseconds),n=i.uri,[o,c]=(0,s.useState)(0===i.timeLeft.milliseconds),{filter:d}=(0,s.useContext)(u.fo),m=(0,H.O1)(),y=(0,L.jh)(),x=(0,F.o)(),[h]=(0,E.Z)(n,!0),f=(0,J.k)(i.uri,i.isPlayable),b=(0,g.k)(),P=(0,B.Y)((e=>{if(e?.item?.uri===i.uri){const t=(0,K.k)(e)??0;return l.current=t,t}return 0})),{isPlaying:j,isActive:C,togglePlay:A}=r({uri:n,index:e}),{isPlaying:k,isActive:I,togglePlay:S}=(0,p.n)({uri:n,pages:[{items:[{type:Q.p.EPISODE,uri:n,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,s.useEffect)((()=>{h||a()}),[h,a]),(0,s.useEffect)((()=>{j||i.duration.milliseconds<=l.current&&c(!0)}),[j,i.duration.milliseconds]);const T=(0,s.useCallback)((e=>{e||(l.current=0),c(e)}),[]),D=(0,s.useCallback)((()=>{x({type:"click",targetUri:n,intent:"navigate"})}),[n,x]),_=(0,s.useCallback)((()=>{b?(x({type:"click",intent:j?"pause":"play"}),A()):(x({type:"click",intent:k?"pause":"play"}),S())}),[b,j,k,x,A,S]),N=(0,s.useCallback)((e=>(0,w.jsx)(Z.o,{searchWords:[d],textToHighlight:e})),[d]),O=i.podcastSubscription?.isPaywalled??!1,v=i.podcastSubscription?.isUserSubscribed??!1,{badges:Y}=(0,V.r)({isExplicit:i.isExplicit,isMOGEFRestricted:i.is19PlusOnly,isPaywalled:O});let ee=!1;return(C||!b&&I)&&(ee=!0),h?(0,w.jsx)(R.ZP,{value:"row",index:e,children:(0,w.jsx)(z._,{menu:(0,w.jsx)(M.k,{uri:n,showUri:i.show.uri,isPlayed:o,onMarkAsPlayed:T}),children:(0,w.jsx)(U.X,{requestId:i.requestId,index:e,uri:n,uid:n,size:y,images:i.images.map((e=>({url:e.url,width:e.width||(e.label?X[e.label]:null),height:e.height||(e.label?X[e.label]:null)}))),isPaywalled:O,isUserSubscribed:v,name:i.name,highlightText:N,showName:i.show.name,showUri:i.show.uri,description:i.description,isPlayable:f,fullyPlayed:o,durationMs:i.duration.milliseconds,releaseDate:i.release.date||"",resumePositionMs:l.current,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const s=`${i.name} â€¢ ${i.show.name}`;m(e,[n],s,t)},handlePlaybackClick:_,handleClick:D,isCurrentlyPlaying:ee,isPlaying:b?j:k,position:ee?P:void 0,episodeSharingInfo:null,onMarkAsPlayed:T,badges:(0,w.jsxs)(w.Fragment,{children:[Y.explicit&&(0,w.jsx)(G.N,{}),Y.paid&&(0,w.jsx)($.g,{}),Y.nineteen&&(0,w.jsx)(q.X,{size:16})]}),playButtonWrapper:e=>(0,w.jsx)(W.l,{enabled:O&&!v,showUri:i.show.uri,children:e})})})}):null})),ee="p6DKqBcwmVtxmHt8ju43",te="_OxEpxzAgJiTENfolVUN",ie=s.memo((function({contextUri:e,usePlayContextItem:t}){const i=(0,s.useContext)(y.H),{sortState:a}=(0,s.useContext)(c.Q),[r,l]=(0,s.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),n=(0,s.useRef)(!1),o=(0,s.useRef)(0),d=(0,s.useRef)(0),{filter:g}=(0,s.useContext)(u.fo),m=(0,s.useCallback)((()=>{d.current++}),[]),{ref:p,breakpoint:x}=(0,L.Db)({[L.Uo.MEDIUM]:0,[L.Uo.LARGE]:600}),h=(0,s.useCallback)(((e=!1)=>{const t=o.current;null!==t&&(n.current||(n.current=!0,(async e=>{const t=await i.getEpisodes({offset:e-d.current,limit:50,sort:S(a),filter:g});return d.current=0,t})(Number(t)).then((i=>{l((s=>{const a=Number(i.offset)+i.items.length,r=e?[]:[...s.items];return r.splice(Number(t),i.items.length,...i.items),o.current=a<i.totalLength?a:null,{...i,items:r}})),n.current=!1}))))}),[g,i,a]);return(0,s.useEffect)((()=>{o.current=0,h(!0)}),[h]),(0,w.jsx)(L.ZU.Provider,{value:x,children:(0,w.jsx)(R.ZP,{value:"track-list",children:(0,w.jsx)("div",{ref:p,children:(0,w.jsx)(v.C,{onReachBottom:h,triggerOnInitialLoad:!0,children:r.items.map(((i,s)=>(0,w.jsxs)("div",{className:te,children:[(0,w.jsx)("hr",{className:ee,"aria-hidden":!0}),(0,w.jsx)(Y,{index:s,episode:i,contextUri:e,onRemove:m,usePlayContextItem:t},`${i.uri}/${s}`)]},`${s}${i.uri}`)))})})})})}));var se=i(60289),ae=i(59482),re=i(72907),le=i(37761),ne=i(83209);const oe=({metadata:e,backgroundColor:t,isPlaying:i,isOnline:a,togglePlay:l})=>{const{uri:n,name:o,images:u,totalLength:c,owner:d}=e,g=(0,s.useMemo)((()=>({id:d.username,uri:d.uri,name:d.username,displayName:d.displayName||void 0,images:d.images||[]})),[d]);return(0,w.jsxs)(se.gF,{backgroundColor:t,children:[(0,w.jsxs)(ae.W,{children:[(0,w.jsx)(P.$,{size:"md",onClick:()=>l(),isPlaying:i,uri:n,disabled:!a,ariaPlayLabel:r.ag.get("playlist.a11y.play",o),ariaPauseLabel:r.ag.get("playlist.a11y.pause",o)}),(0,w.jsx)(re.i,{text:o})]}),(0,w.jsx)(se.Oz,{images:u,name:o,shape:le.K.ROUNDED_CORNERS,renderImage:()=>(0,w.jsx)(ne.$,{})}),(0,w.jsxs)(se.sP,{children:[(0,w.jsx)(se.dy,{small:!0,uppercase:!0,children:r.ag.get("playlist")}),(0,w.jsx)(se.xd,{canEdit:!1,onClick:()=>{},children:o}),(0,w.jsx)(se.QS,{creators:[g],totalEpisodes:c})]})]})},ue=({metadata:e,canSort:t})=>{const i=(0,m.Y5)("#006450"),n=(0,g.k)(),{sortState:d}=(0,s.useContext)(c.Q),{filter:y}=(0,s.useContext)(u.fo),{isPlaying:f,togglePlay:b,usePlayContextItem:P}=(0,p.n)({uri:e.uri,metadata:{[x.sb.SORTING_CRITERIA]:T(d),[x.sb.FILTERING_PREDICATE]:(0,o.aK)(y)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});return(0,w.jsxs)("section",{className:_,"data-testid":"your-episodes-page",children:[(0,w.jsx)(h.$,{children:r.ag.get("sidebar.your_episodes")}),(0,w.jsx)(oe,{metadata:e,backgroundColor:i,isPlaying:f,isOnline:n,togglePlay:b}),(0,w.jsxs)("div",{className:D,children:[(0,w.jsx)(O,{metadata:e,backgroundColor:i,isPlaying:f,isOnline:n,togglePlay:b,canSort:t}),(0,w.jsx)("div",{className:"contentSpacing",children:e.totalLength>0?(0,w.jsx)(ie,{contextUri:e.uri,usePlayContextItem:P}):(0,w.jsx)(l.u,{message:r.ag.get("collection.empty-page.episodes-subtitle"),title:r.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:r.ag.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,w.jsx)(a.G,{"aria-hidden":"true"})})})]})]})},ce=(0,s.memo)((function(){const e=(0,s.useContext)(y.H).getCapabilities(),t=(0,f.x)();return t?(0,w.jsx)(c.$,{uri:t.uri,defaultSortOption:d.oT.ADDED_AT,children:(0,w.jsx)(u.hz,{uri:t.uri,children:(0,w.jsx)(ue,{metadata:t,canSort:e.canSortTracksAndEpisodes&&t.totalLength>0})})}):(0,w.jsx)(n.h,{hasError:!1,errorMessage:r.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map