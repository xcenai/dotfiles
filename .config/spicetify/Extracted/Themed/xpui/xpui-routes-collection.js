"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[6309],{40771:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(67892),r=s(85893);const a=({href:e,children:t,...s})=>(0,r.jsx)(n.Z,{to:e,...s,children:t})},56170:(e,t,s)=>{s.d(t,{P:()=>l});var n=s(67294),r=s(36590),a=s(8498),i=s(85893);const l=(0,n.memo)((function({index:e}){return(0,i.jsx)(r.C,{index:e,headerText:"",uri:"",renderCardImage:()=>(0,i.jsx)(a.x,{images:[]}),featureIdentifier:"unknown"})}))},69376:(e,t,s)=>{s.d(t,{n:()=>L});var n=s(67294),r=s(94184),a=s.n(r),i=s(51615),l=s(32667),o=s(34142),c=s(47921),u=s(96206),d=s(24697),m=s(32648),g=s(85951);var h=s(32626),p=s(43031),f=s(30005),x=s(21691);const j="main-topBar-contentArea",b="muYk5XIwKmqR9iNibk_f",y="queue-tabBar-headerItem",C="queue-tabBar-moreButton",v="queue-tabBar-moreButtonActive",k="yxf_6IsQEmHjijEBUMTP",I="queue-tabBar-active",R="queue-tabBar-headerItemLink",w="queue-tabBar-header",S="queue-tabBar-chevron";var A=s(85893);const N=({items:e,activeItemId:t})=>(0,A.jsx)(f.v,{children:e.map((e=>e.disabled?(0,A.jsx)(x.s,{disabled:!0,role:"menuitemradio",className:k,onClick:e.handleClick,children:e.title},e.uri):(0,A.jsx)(x.s,{role:"menuitemradio",to:e.to,exact:!0,"aria-checked":e.itemId===t,className:k,activeClassName:I,onClick:e.handleClick,children:e.title},e.uri)))}),L=(0,n.memo)((function({isCentered:e,links:t,landmarkLabel:s,className:r}){const f=(0,n.useRef)(null),[x,k]=(0,n.useState)([]),[L,T]=(0,n.useState)(0),[E,O]=(0,n.useState)([]),B=function(){const[e,t]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:s}=(0,n.useContext)(m.VX),r=(0,d.y1)((e=>{e?.width&&t(e.width)}),250);return(0,g.y)({refOrElement:s,observeOnly:"width",onResize:r}),e}()??1/0,{pathname:P}=(0,i.TH)(),D=t.find((e=>e.to===P));return(0,n.useEffect)((()=>{f.current&&T(f.current.clientWidth)}),[B]),(0,n.useEffect)((()=>{if(!f.current)return;const e=Array.from(f.current.children).map((e=>e.clientWidth));k(e)}),[t]),(0,n.useEffect)((()=>{if(!f.current)return;if(x.slice(0,-1).reduce(((e,t)=>e+t),0)<=L)return void O([]);const e=x.reduce(((e,t)=>e>t?e:t),0),t=[];let s=e;x.forEach(((e,n)=>{L>=s+e?s+=e:t.push(n)})),O(t)}),[L,x]),(0,A.jsx)("nav",{className:a()(r,j),"aria-label":s,children:(0,A.jsxs)("ul",{className:e?b:w,ref:f,children:[t.filter(((e,t)=>!E.includes(t))).map((e=>(e?.render??(e=>e))((0,A.jsx)("li",{className:y,children:e.disabled?(0,A.jsx)("div",{className:R,children:(0,A.jsx)(l.D,{variant:"mestoBold",children:e.title})}):(0,A.jsx)(p.O,{exact:!0,className:R,activeClassName:I,to:e.to,onClick:e.handleClick,children:(0,A.jsx)(l.D,{variant:"mestoBold",children:e.title})})},e.to)))),E.length||0===x.length?(0,A.jsx)("li",{className:y,children:(0,A.jsx)(h.xV,{renderInline:!0,menu:(0,A.jsx)(N,{items:t.filter(((e,t)=>E.includes(t))),activeItemId:D?.itemId}),children:(e,t,s)=>(0,A.jsxs)("button",{className:a()(C,{[v]:D}),type:"button",onClick:t,ref:s,children:[(0,A.jsx)(l.D,{variant:"mestoBold",children:D?D.title:u.ag.get("more")}),e?(0,A.jsx)(o.U,{iconSize:16,className:S,"aria-hidden":"true"}):(0,A.jsx)(c.i,{iconSize:16,className:S,"aria-hidden":"true"})]})})}):null]})})}))},21318:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ot});var n=s(67294),r=s(86706),a=s(51615),i=s(87577),l=s(73305),o=s(96206),c=s(70369),u=s(13983),d=s(49207),m=s(98773),g=s(12164),h=s(32667),p=s(72803),f=s(3634),x=s(94184),j=s.n(x),b=s(48817),y=s(85893);const C=({span:e,onInView:t,marginBottom:s,marginTop:r})=>{const a=(0,n.useRef)(null);return(0,n.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t()}))}));return a.current&&e.observe(a.current),()=>{e.disconnect()}}),[t]),e<=0?null:(0,y.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${e}`,marginBottom:s,marginTop:r},ref:a,"data-type":"sentinel"},"topSentinel")},v=({renderItems:e,nrItems:t,estimatedItemMaxHeight:s,scrollNodeRef:r,nrRowsOverscan:a=5,initalNrRows:i=5})=>{const[l,o]=(0,n.useState)({firstRowToRender:0,nrRows:i+a}),c=(0,n.useRef)(0),u=(0,n.useRef)(null),d=(0,n.useRef)(s),m=(0,n.useCallback)((()=>{const e=r.current;if(!e)return;const t=u.current?.querySelector(':scope > *:not([data-type="sentinel"])');d.current=t?t.getBoundingClientRect().height+b.w:d.current;const s=Math.floor((e.scrollTop-c.current)/d.current),n=Math.max(s-a,0),i=Math.ceil(e.offsetHeight/d.current)+2*a;n===l.firstRowToRender&&i===l.nrRows||o({firstRowToRender:n,nrRows:i})}),[a,l,r]),g=(0,n.useCallback)((({columnCount:s})=>{if(s<=0)return[null];const n=Math.ceil(t/s),r=l.firstRowToRender*s,i=l.firstRowToRender+l.nrRows-1,o=Math.min(t-1,(i+1)*s-1),c=d.current*(a-2);return[(0,y.jsx)(C,{span:l.firstRowToRender,onInView:m,marginBottom:`-${c}px`},`topSentinel-${l.firstRowToRender}`),e(r,o,s),(0,y.jsx)(C,{span:n-i,onInView:m,marginTop:`-${c}px`},"bottomSentinel-"+(n-i))]}),[t,a,m,e,l.firstRowToRender,l.nrRows]);return(0,n.useEffect)((()=>{const e=u.current,t=r.current;e&&t&&(c.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[r]),(0,y.jsx)(b.T,{useUniformRowHeight:!0,ref:u,render:g})};var k=s(32648),I=s(53003),R=s(56170);const w="lA3jnNwnLc3CoYKT06Vz";function S({renderCard:e,nrCards:t,fetchData:s,limit:r=50,cardGridApiRef:a}){const{scrollNodeRef:i}=(0,n.useContext)(k.VX),{getItems:l,nrValidItems:o,invalidateCache:c,hasItems:u}=(0,I.Q)({nrItems:t,fetch:s,limit:r});(0,n.useImperativeHandle)(a,(()=>({update:()=>c()})));return(0,y.jsx)("div",{className:j()({[w]:!u}),children:(0,y.jsx)(v,{renderItems:(t,s,n)=>l(t,s).map(((s,r)=>(s?e(s,t+r,n):null)??(0,y.jsx)(R.P,{index:r},t+r))),scrollNodeRef:i,nrItems:o,estimatedItemMaxHeight:250})})}var A=s(30731),N=s(6158),L=s(22423),T=s(49343),E=s(42922),O=s(45342),B=s(15852),P=s(64971),D=s(47032),U=s(38911),Y=s(6489),F=s(76391);const M={offset:0,limit:1},_=()=>{const e=(0,n.useContext)(O.H);return(e=>{const[t,s]=(0,n.useState)(null),r=(0,n.useCallback)((async()=>{if(!e)return;const t=await e();s(t?.totalLength||0)}),[e]);return(0,n.useEffect)((()=>{null===t&&r()}),[t,r]),{total:t}})((0,n.useCallback)((()=>e?e?.getShows(M):Promise.resolve({totalLength:0})),[e]))};var H=s(47975);const W=n.memo((function({nrAlbums:e}){const t=(0,n.useContext)(O.H),{filter:s}=(0,n.useContext)(L.fo),{sortState:r}=(0,n.useContext)(D.Q),a=(0,n.useRef)(null),{spec:i,UBIFragment:c}=(0,B.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:albums",identifier:l.Wg.YOURLIBRARY_ALBUMS}}),u=(0,n.useMemo)((()=>i.headerFactory()),[i]),d=(0,n.useCallback)((async(e,n)=>{const a=await t.getAlbums({offset:e,limit:n,filter:s,sort:(0,U.Aq)(r)});return{items:a.items,totalLength:a.totalLength}}),[t,s,r]),m=(0,n.useCallback)(((e,t)=>(0,y.jsx)(E.ZP,{value:"card",index:t,children:(0,y.jsx)(f.r,{index:t,uri:e.uri,name:e.name,images:e.images,artists:e.artists,sharingInfo:e.sharingInfo})},e.uri)),[]);return(0,y.jsxs)(c,{spec:i,children:[(0,y.jsx)(c,{spec:u,children:(0,y.jsxs)("div",{className:H.Z.header,children:[(0,y.jsx)(h.D,{as:"h1",variant:"canon",children:o.ag.get("albums")}),(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(P.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.albums"),sortOptions:U.Ru})})]})}),(0,y.jsx)(S,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:a})]})})),Z=n.memo((function(){const{total:e}=(()=>{const e=(0,n.useContext)(O.H),[t,s]=(0,n.useState)(null),r=(0,n.useCallback)((async()=>{if(!e)return;const t=await(e?.getAlbums(M));s(t?.totalLength||0)}),[e]);return(0,n.useEffect)((()=>{null===t&&r()}),[t,r]),(0,F.b)(Y.EW.UPDATE,r),{total:t}})();return null===e?(0,y.jsx)(N.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?(0,y.jsx)(W,{nrAlbums:e}):(0,y.jsx)(A.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.albums-cta"),message:o.ag.get("collection.empty-page.albums-subtitle"),title:o.ag.get("collection.empty-page.albums-title"),children:(0,y.jsx)(T.t,{type:"album"})})})),G=n.memo((function(){return(0,y.jsx)(D.$,{uri:"collection/albums",defaultSortOption:U.aY,children:(0,y.jsx)(L.hz,{uri:"collection/albums",children:(0,y.jsx)(Z,{})})})}));var V=s(89477);const K=n.memo((function({nrArtists:e}){const t=(0,n.useContext)(O.H),{filter:s}=(0,n.useContext)(L.fo),{sortState:r}=(0,n.useContext)(D.Q),a=(0,n.useRef)(null),{spec:i,UBIFragment:c}=(0,B.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:artists",identifier:l.Wg.YOURLIBRARY_ARTISTS}}),u=(0,n.useMemo)((()=>i.headerFactory()),[i]),d=(0,n.useCallback)((async(e,n)=>{const a=await t.getArtists({offset:e,limit:n,filter:s,sort:(0,U.e3)(r)});return{items:a.items,totalLength:a.totalLength}}),[t,s,r]),m=(0,n.useCallback)(((e,t)=>(0,y.jsx)(E.ZP,{value:"card",index:t,children:(0,y.jsx)(V.I,{index:t,name:e.name,uri:e.uri,images:e.images})},e.uri)),[]);return(0,n.useEffect)((()=>{a.current&&a.current.update()}),[r,s,e]),(0,y.jsxs)(c,{spec:i,children:[(0,y.jsx)(c,{spec:u,children:(0,y.jsxs)("div",{className:H.Z.header,children:[(0,y.jsx)(h.D,{as:"h1",variant:"canon",children:o.ag.get("artists")}),(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(P.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.artists"),sortOptions:U.o$})})]})}),(0,y.jsx)(S,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:a})]})})),z=n.memo((function(){const{total:e}=(()=>{const e=(0,n.useContext)(O.H),[t,s]=(0,n.useState)(null),r=(0,n.useCallback)((async()=>{if(!e)return;const t=await(e?.getArtists(M));s(t?.totalLength||0)}),[e]);return(0,n.useEffect)((()=>{null===t&&r()}),[t,r]),(0,F.b)(Y.EW.UPDATE,r),{total:t}})();return null===e?(0,y.jsx)(N.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-artists-failure")}):e>0?(0,y.jsx)(K,{nrArtists:e}):(0,y.jsx)(A.u,{message:o.ag.get("collection.empty-page.artists-subtitle"),title:o.ag.get("collection.empty-page.artists-title"),linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.artists-cta"),children:(0,y.jsx)(T.t,{type:"artist"})})})),q=n.memo((function(){return(0,y.jsx)(D.$,{uri:"collection/artists",defaultSortOption:U.u3,children:(0,y.jsx)(L.hz,{uri:"collection/artists",children:(0,y.jsx)(z,{})})})}));var Q=s(51216);const $=n.memo((function({nrBooks:e}){const t=(0,n.useContext)(O.H),{filter:s}=(0,n.useContext)(L.fo),{sortState:r}=(0,n.useContext)(D.Q),{spec:a,UBIFragment:i}=(0,B.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:audiobooks",identifier:l.Wg.YOURLIBRARY_AUDIOBOOKS}}),c=(0,n.useMemo)((()=>a.headerFactory()),[a]),u=(0,n.useRef)(null),d=(0,n.useCallback)((async(e,n)=>{const a=await t.getBooks({offset:e,limit:n,filter:s,sort:(0,U.G5)(r)});return{items:a.items.map((e=>(e=>""===e.authorName&&""===e.name)(e)?null:e)),totalLength:a.totalLength}}),[t,s,r]),m=(0,n.useCallback)(((e,t)=>(0,y.jsx)(E.ZP,{value:"card",index:t,children:(0,y.jsx)(Q.c,{index:t,uri:e.uri,name:e.name,images:e.images,authorName:e.authorName,isLocked:e.isLocked})},e.uri)),[]);return(0,y.jsxs)(i,{spec:a,children:[(0,y.jsx)(i,{spec:c,children:(0,y.jsxs)("div",{className:H.Z.header,children:[(0,y.jsx)(h.D,{as:"h1",variant:"canon",children:o.ag.get("search.title.audiobooks")}),(0,y.jsx)(P.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:"Search in Audiobooks",sortOptions:U.ZP})]})}),(0,y.jsx)(S,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:u})]})})),J=n.memo((function(){const{total:e}=(()=>{const e=(0,n.useContext)(O.H),[t,s]=(0,n.useState)(null),r=(0,n.useCallback)((async()=>{if(!e)return;const t=await(e?.getBooks(M));s(t?.totalLength||0)}),[e]);return(0,n.useEffect)((()=>{null===t&&r()}),[t,r]),(0,F.b)(Y.EW.UPDATE,r),{total:t}})();return null===e?(0,y.jsx)(N.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e>0?(0,y.jsx)($,{nrBooks:e}):(0,y.jsx)(A.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.books-cta"),message:o.ag.get("collection.empty-page.books-subtitle"),title:o.ag.get("collection.empty-page.books-title"),children:(0,y.jsx)(T.t,{type:"book"})})})),X=n.memo((function(){return(0,y.jsx)(D.$,{uri:"collection/books",defaultSortOption:U.JV,children:(0,y.jsx)(L.hz,{uri:"collection/books",children:(0,y.jsx)(J,{})})})}));var ee=s(46309),te=s(74895),se=s(24697),ne=s(36590),re=s(8498),ae=s(98620),ie=s(13947),le=s(72131),oe=s(45788),ce=s(66393),ue=s(91389),de=s(84242),me=s(69691),ge=s(28230);const he="tlNAdRNP5lIeiD85nMcL",pe="FmJEtzkC9046pKloStht",fe=()=>{const e=(0,ge.g)("images/playlist-folder-filled.svg");return(0,y.jsx)("div",{className:he,children:(0,y.jsx)("img",{src:e,alt:o.ag.get("local-files"),className:pe})})},xe=function({uri:e,name:t,images:s,index:r}){const a=(0,oe.u)(),i=(0,n.useRef)(null),l=(0,n.useRef)(!0),c=(0,n.useContext)(ce.t),{isPlaying:u}=(0,me.cR)(le.b),{togglePlay:d}=(0,de.n)({uri:le.b,pages:[{items:i.current?.map((e=>({...e,provider:null})))||[]}]},{featureIdentifier:"local_files"});(0,n.useEffect)((()=>(l.current=!0,()=>{l.current=!1})),[]);const m=(0,ue.I)(),g=(0,se.y1)((async(e,t)=>{if(!i.current){const e=await c.getTracks();i.current=e}l&&d({loggingParams:t},{uri:le.b,pages:[{items:i.current?.map((e=>({...e,provider:null})))||[]}]})}),ie.s_,{leading:!0,trailing:!1});return a.canFetchAllTracks&&m?(0,y.jsx)(ne.Z,{index:r,delegatePlayback:!0,delegateLogging:!0,isPlaying:u,onPlay:g,headerText:t,featureIdentifier:"local_files",uri:e,renderCardImage:()=>(0,y.jsx)(re.x,{images:s,FallbackComponent:fe}),renderSubHeaderContent:()=>(0,y.jsx)("span",{children:o.ag.get("local-files.description")})}):null},je=({index:e})=>{const t=(0,ae.gB)();return(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(xe,{index:e,name:t.name,uri:t.uri,images:t.images})})};var be=s(49068),ye=s(64269),Ce=s(42624),ve=s(29255),ke=s(72138),Ie=s(42781),Re=s(38470),we=s(21610),Se=s(39561),Ae=s(22247);const Ne="collection-collectionEntityHeroCard-likedSongs",Le="collection-collectionEntityHeroCard-container",Te="kST1INfbHSxzydJffBq_",Ee="collection-collectionEntityHeroCard-headerContainer",Oe="collection-collectionEntityHeroCard-tracksContainer",Be="lBs1v3T3HAPrOxfyWemr",Pe="collection-collectionEntityHeroCard-descriptionContainer",De="d8ifuAZX8mK644AwlRZK";function Ue(e,t){return Array.from(new Array(e).keys()).map((e=>(0,y.jsx)(Ae.C,{as:"div",className:Be,charCount:t,isLoading:!0},e)))}const Ye=({index:e,onClick:t})=>{const s=(0,Se.MY)({limit:7}),{user:n}=(0,r.v9)(ve.Gg),a=(0,ae.I2)(n?.id);return a?(0,y.jsx)(we.Z,{index:e,className:j()(Ne,Le),onClick:t,headerText:a.name,featureIdentifier:"your_library",uri:a.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",a.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",a.name),renderCardImage:()=>{return(0,y.jsx)("div",{className:Ee,children:(0,y.jsx)("div",{className:Oe,children:s?(e=s,e.items.map((({uri:e,name:t,artists:[s]},n)=>(0,y.jsxs)("span",{children:[(0,y.jsx)("span",{className:De,children:n?" • ":""}),(0,y.jsx)("span",{dir:"auto",children:s.name}),(0,y.jsx)("span",{dir:"auto",className:De,children:t})]},e)))):Ue(3)})});var e},renderSubHeaderContent:()=>(0,y.jsx)("div",{className:Pe,children:s?`${s.totalLength} ${a.name}`:Ue(1,a.name.length)})}):null},Fe=(e,t,s)=>(0,y.jsx)(E.ZP,{value:"card",index:t,children:s},`${e.uri}`??0),Me=(e,t,s)=>{switch(e.type){case Ie.p.LIKED_SONGS:return Fe(e,t,s>1?(0,y.jsx)(Ye,{index:t},e.uri):(0,y.jsx)(te.p,{index:t},e.uri));case Ie.p.YOUR_EPISODES:return Fe(e,t,(0,y.jsx)(ye.T,{index:t},e.uri));case Ie.p.LOCAL_FILES:return Fe(e,t,(0,y.jsx)(je,{index:t},e.uri));case Ie.p.PLAYLIST:return Fe(e,t,(0,y.jsx)(ee.Z,{index:t,name:e.name,uri:e.uri,images:e.images,description:e.description,authorName:e.owner?.displayName,isPlayable:e.totalLength>0},e.uri));case"placeholder":return Fe(e,t,(0,y.jsx)(ee.Z,{index:t,uri:e.uri,name:"",images:[],description:"",authorName:""},e.uri));case"empty":return(0,y.jsx)(n.Fragment,{},t);case"folder":return null;default:return(0,Re._)(e),null}},_e=n.memo((function({nrPlaylists:e,showYourEpisodesCard:t,showLocalFilesCard:s}){const{filter:a}=(0,n.useContext)(L.fo),{sortState:i}=(0,n.useContext)(D.Q),c=(0,n.useContext)(ke.BS),u=(0,n.useRef)(null),d=(0,r.v9)(ve.Gg).user,{spec:m,UBIFragment:g}=(0,B.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:playlists",identifier:l.Wg.YOURLIBRARY_PLAYLISTS}}),f=(0,n.useMemo)((()=>m.headerFactory()),[m]),x=(0,n.useMemo)((()=>{const e=[];if(a)return e;const n=(0,ae.I2)(d?.id);n&&(e.push(n),e.push({uri:"",type:"empty"}));const r=t?(0,ae.bl)(d?.id):null;r&&e.push(r);const i=s?(0,ae.gB)():null;return i&&e.push(i),e}),[a,s,t,d]),j=(0,n.useCallback)((()=>{u?.current&&u.current.update()}),[u]);(0,ke.iu)(j);const b=(0,n.useCallback)((async(e,t)=>{const s=x.slice(e),n=e-(x.length-s.length),r=await c.getContents({offset:n,limit:t,filter:a,sort:(0,U.pT)(i),flatten:!0,decorateImagesAndOwner:!0}),l=r.items.map((e=>"placeholder"===e.type?null:e));return{items:[...s,...l],totalLength:r.totalItemCount+x.length}}),[x,c,a,i]);return(0,y.jsxs)(g,{spec:m,children:[(0,y.jsx)(g,{spec:f,children:(0,y.jsxs)("div",{className:H.Z.header,children:[(0,y.jsx)(h.D,{as:"h1",variant:"canon",children:o.ag.get("playlists")}),(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(P.h,{canSort:c.getCapabilities().canSort,canFilter:c.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.playlists"),sortOptions:U.w0})})]})}),(0,y.jsx)(S,{nrCards:e+x.length,renderCard:Me,fetchData:b,cardGridApiRef:u})]})})),He=n.memo((function(){const e=(0,ke.Rt)(),t=(0,be.x)(),s=(0,oe.u)(),{createPlaylist:r}=(0,Ce.K)(),a=(0,ue.I)(),i=(0,n.useCallback)((()=>{r()}),[r]);return null===e||null===t?(0,y.jsx)(N.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?.playlistCount?(0,y.jsx)(_e,{nrPlaylists:e.playlistCount,showYourEpisodesCard:t.totalLength>0,showLocalFilesCard:s.canFetchAllTracks&&a}):(0,y.jsx)(A.u,{linkTitle:o.ag.get("collection.empty-page.playlists-cta"),onClick:i,title:o.ag.get("collection.empty-page.playlists-title"),message:o.ag.get("collection.empty-page.playlists-subtitle"),children:(0,y.jsx)(T.t,{type:"playlist"})})})),We=n.memo((function(){return(0,y.jsx)(D.$,{uri:"collection/playlists",defaultSortOption:U.Bf,children:(0,y.jsx)(L.hz,{uri:"collection/playlists",children:(0,y.jsx)(He,{})})})}));var Ze=s(95332),Ge=s(49552),Ve=s(21794),Ke=s(143),ze=s(19480);const qe=()=>{const e="ginger-audio-shows-top-20-web",{view:t}=(0,Ge.P)(e);if(!t)return null;const{content:s,name:n}=t,{total:r=0,items:a}=s;return(0,y.jsx)(ze.P,{title:n,total:r,seeAllUri:(0,Ve.p)(e),children:a.filter((e=>"show"===e.type)).map(((e,t)=>(0,y.jsx)(Ze._,{name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,mediaType:{audio:Ke.E.AUDIO,video:Ke.E.VIDEO,mixed:Ke.E.MIXED}[e.media_type]??Ke.E.AUDIO,sharingInfo:null,index:t},e.uri)))})};var Qe=s(70937),$e=s(66257);function Je(e,t){return Array.from(new Array(e).keys()).map((e=>(0,y.jsx)(Ae.C,{as:"div",className:Be,charCount:t,isLoading:!0},e)))}const Xe=({index:e})=>{const t=(0,Se.j$)({limit:7}),{user:s}=(0,r.v9)(ve.Gg),n=(0,ae.bl)(s?.id);return n?(0,y.jsx)(we.Z,{index:e,className:j()(Ne,Te),headerText:n.name,featureIdentifier:"your_library",uri:n.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",n.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",n.name),renderCardImage:()=>{return(0,y.jsx)("div",{className:Ee,children:(0,y.jsx)("div",{className:Oe,children:t?(e=t,e.items.map((({uri:e,name:t,show:s},n)=>(0,y.jsxs)("span",{children:[(0,y.jsx)("span",{className:De,children:n?" • ":""}),(0,y.jsx)("span",{dir:"auto",children:t}),(0,y.jsx)("span",{dir:"auto",className:De,children:s.name})]},e)))):Je(3)})});var e},renderSubHeaderContent:()=>(0,y.jsx)("div",{className:Pe,children:t?o.ag.get("tracklist-header.episodes-counter",t.totalLength):Je(1,n.name.length)})}):null},et=n.memo((function({nrShows:e}){const t=(0,n.useContext)(O.H),{filter:s}=(0,n.useContext)(L.fo),{sortState:a}=(0,n.useContext)(D.Q),i=(0,n.useRef)(!1),c=(0,n.useRef)({entities:[],total:e}),[u,d]=(0,n.useState)(0),{user:m}=(0,r.v9)(ve.Gg),{spec:g,UBIFragment:f}=(0,B.fU)(p.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:podcasts",identifier:l.Wg.YOURLIBRARY_SHOWS}}),x=(0,n.useMemo)((()=>g.headerFactory()),[g]),j=(0,n.useCallback)((async(e,n,r=!1)=>{if(!i.current){i.current=!r;const l=await t.getShows({offset:e,limit:n,filter:s,sort:(0,U.EY)(a)});c.current=function(e,t,s){const n={...s};return n.entities=t?e.items||[]:n.entities.concat(e.items||[]),n.total=e.totalLength,n}(l,r,c.current),i.current=!1,d((e=>e+1))}}),[t,s,a,c]),C=(0,n.useCallback)((e=>{c.current=function(e,t){const s={...t},n=t.entities.filter((t=>t.uri!==e));return s.total=(t.total||0)-(t.entities.length-n.length),s.entities=n,s}(e,c.current),d((e=>e+1))}),[]);(0,n.useEffect)((()=>{j(0,50,!!u)}),[s,a]);const v=(0,n.useCallback)((()=>{c.current.entities.length!==c.current.total&&j(c.current.entities.length,50)}),[j,c]);return(0,y.jsx)(f,{spec:g,children:(0,y.jsxs)(Qe.C,{onReachBottom:v,children:[(0,y.jsx)(f,{spec:x,children:(0,y.jsxs)("div",{className:H.Z.header,children:[(0,y.jsx)(h.D,{as:"h1",variant:"canon",children:o.ag.get("podcasts")}),(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(P.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.podcasts"),sortOptions:U.a6})})]})}),(0,y.jsx)($e.r,{onLibraryItemRemove:C,children:(0,y.jsx)(E.ZP,{value:"EntitiesGrid",children:(0,y.jsx)(b.T,{render:()=>{const e=(0,ae.bl)(m?.id),t=s||!e||0===c.current.entities.length?[]:[(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(Xe,{index:0})},"your-episodes-card")],r=t.length>0;return t.concat(c.current.entities.map(((e,t)=>{const s=r?t+1:t;return(0,y.jsx)(E.ZP,{value:"card",index:s,children:(0,y.jsx)(Ze._,{index:s,name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,sharingInfo:null})},e.uri)})))}})})})]})})})),tt=n.memo((function(){const{total:e}=_(),{productState:t}=(0,r.v9)(ve.Gg),s=!!t&&parseInt(t.ads,10)>0;return null===e?(0,y.jsx)(N.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-shows-failure")}):e?(0,y.jsx)(et,{nrShows:e}):(0,y.jsxs)("div",{className:j()(H.Z.emptyStateContainer,{[H.Z.adBarEnabled]:s}),children:[(0,y.jsx)(A.u,{linkTo:"/genre/podcasts-web",linkTitle:o.ag.get("collection.empty-page.shows-cta"),message:o.ag.get("collection.empty-page.shows-subtitle"),title:o.ag.get("collection.empty-page.shows-title"),renderInline:!0,children:(0,y.jsx)(T.t,{type:"show"})}),(0,y.jsx)(qe,{})]})})),st=n.memo((function(){return(0,y.jsx)(D.$,{uri:"collection/podcasts",defaultSortOption:U.rJ,children:(0,y.jsx)(L.hz,{uri:"collection/podcasts",children:(0,y.jsx)(tt,{})})})}));var nt=s(48414),rt=s(69376),at=s(28638);const it=({isAudiobooksEnabled:e})=>{const t=(0,r.v9)(m.rH),{spec:s,logger:a}=(0,B.fU)(nt.createDesktopLibraryTopbarEventFactory,{}),i=(0,n.useMemo)((()=>[{title:o.ag.get("playlists"),itemId:"collection.tab-playlists",to:"/collection/playlists",uri:"spotify:app:collection:playlists"},...t?[{title:o.ag.get("podcasts"),itemId:"collection.tab-podcasts",to:"/collection/podcasts",uri:"spotify:app:collection:podcasts"}]:[],...e?[{title:o.ag.get("search.title.audiobooks"),itemId:"collection.tab-audiobooks",to:"/collection/audiobooks",uri:"spotify:app:collection:audiobooks"}]:[],{title:o.ag.get("artists"),itemId:"collection.tab-artists",to:"/collection/artists",uri:"spotify:app:collection:artists"},{title:o.ag.get("albums"),itemId:"collection.tab-albums",to:"/collection/albums",uri:"spotify:app:collection:albums"}].map(((e,t)=>{const n=e.uri;return{...e,handleClick:()=>{const e=s.linkFactory({position:t,uri:n}).hitUiNavigate({destination:n});a.logInteraction(e)}}}))),[t,e,a,s]);return(0,y.jsx)(at.w,{children:(0,y.jsx)(rt.n,{className:H.Z.tabBar,links:i})})},lt=n.lazy((async()=>await s.e(4246).then(s.bind(s,33377)))),ot=()=>{const e=(0,r.v9)(m.rH),t=(0,i.W6)(d.uB);return(0,u.z)("your_library"),(0,y.jsxs)("section",{className:"contentSpacing",children:[(0,y.jsx)(c.$,{children:o.ag.get("collection.page-title")}),(0,y.jsxs)(a.rs,{children:[(0,y.jsx)(a.AW,{path:"/collection/artists",children:(0,y.jsx)(g.K,{pageId:l.Wg.YOURLIBRARY_ARTISTS,children:(0,y.jsx)(q,{})})}),(0,y.jsx)(a.AW,{path:"/collection/albums",children:(0,y.jsx)(g.K,{pageId:l.Wg.YOURLIBRARY_ALBUMS,children:(0,y.jsx)(G,{})})}),(0,y.jsx)(a.AW,{path:"/collection/playlists",children:(0,y.jsx)(g.K,{pageId:l.Wg.YOURLIBRARY_PLAYLISTS,children:(0,y.jsx)(We,{})})}),e&&(0,y.jsx)(a.AW,{path:"/collection/podcasts",children:(0,y.jsx)(g.K,{pageId:l.Wg.YOURLIBRARY_SHOWS,children:(0,y.jsx)(st,{})})}),t&&(0,y.jsx)(a.AW,{path:"/collection/audiobooks",children:(0,y.jsx)(g.K,{pageId:l.Wg.YOURLIBRARY_AUDIOBOOKS,children:(0,y.jsx)(X,{})})}),(0,y.jsx)(a.AW,{path:"/collection/music-downloads",children:(0,y.jsx)(g.K,{pageId:l.Wg.YOURLIBRARY_DOWNLOADS,children:(0,y.jsx)(lt,{})})})]}),(0,y.jsx)(it,{isAudiobooksEnabled:t})]})}},49552:(e,t,s)=>{s.d(t,{P:()=>m});var n=s(67294),r=s(88767),a=s(87961),i=s(85807),l=s(86706),o=s(87577),c=s(94321),u=s(29255),d=s(8247);const m=(e,t)=>{const s=(()=>{const e=(0,o.W6)(d.Xf),t=(0,l.v9)(c.rZ),{locale:s,overrides:r}=(0,l.v9)(u.Gg),a=r?.country||t,i=r?.locale||s;return(0,n.useMemo)((()=>{const t=["album","playlist","artist","show","station","episode","merch","artist_concerts"];return e&&t.push("uri_link"),{country:a,locale:i,types:t.join(",")}}),[a,e,i])})(),{data:m,fetchNextPage:g}=(0,r.useInfiniteQuery)(["useView",e,s],(async({pageParam:t})=>void 0===t?async function(e,t){const{body:s}=await i.kO.getView(a.b.getInstance(),e,t);return s}(e,s):async function(e){const{body:t}=await i.TV.getGeneric(a.b.getInstance(),e);return t}(t)),{cacheTime:t?.cacheTime??18e5,staleTime:t?.staleTime??3e5,getNextPageParam:e=>e.content.next??void 0,getPreviousPageParam:e=>e.content.previous??void 0});return{view:(0,n.useMemo)((()=>m?.pages.reduce(((e,t)=>({...e,content:{...e.content,href:t.content.href,next:t.content.next,offset:t.content.offset,previous:t.content.previous,total:t.content.total,items:e.content.items.concat(t.content.items)}})))),[m?.pages]),getNextPage:g}}},70937:(e,t,s)=>{s.d(t,{C:()=>u});var n=s(67294),r=s(97650),a=s(94184),i=s.n(a);const l="eqw9lvuoZHrkWMTdyTpY",o="lb08f71wES9AQnKx6e0R";var c=s(85893);const u=n.memo((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:s,showScrollbar:a=!0,horizontalScroll:u=!1,className:d}=e,{ref:m,inView:g}=(0,r.YD)({initialInView:t});return(0,n.useEffect)((()=>{g&&s&&s()}),[g,s]),(0,c.jsxs)("div",{className:i()({[o]:!a,[l]:u},d),"data-testid":"infinite-scroll-list",children:[e.children,(0,c.jsx)("div",{ref:m})]})}))},91389:(e,t,s)=>{s.d(t,{I:()=>r});var n=s(30302);function r(){return(0,n.S)()[0]}},47975:(e,t,s)=>{s.d(t,{Z:()=>n});const n={header:"collection-collection-header",tabBar:"collection-collection-tabBar",AddToPlaylistIcon:"collection-collection-AddToPlaylistIcon",emptyStateContainer:"collection-collection-emptyStateContainer",adBarEnabled:"collection-collection-adBarEnabled"}}}]);
//# sourceMappingURL=xpui-routes-collection.js.map