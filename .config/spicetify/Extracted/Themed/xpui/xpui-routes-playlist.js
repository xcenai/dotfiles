"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3878],{77649:(e,i,a)=>{a.r(i),a.d(i,{default:()=>ja});var n=a(67294),t=a(86706),l=a(51615),s=a(69518),r=a.n(s),d=a(32667),o=a(87577),c=a(95222),m=a(96206),u=a(42038),k=a(83056),p=a(85893);const v=(e,i,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(a),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),S=({clickTracking:e,clickThrough:i,thirdPartyImpression:a,impression:l,logoUrl:s,advertiserName:r,creativeId:o,lineItemId:c})=>{const u=(0,t.I0)(),[S,y]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(u((0,k.Vw)()),u((0,k.kh)(v("event_viewed",o,c))),()=>{u((0,k.AG)())})),[u,o,c]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(d.D,{variant:"minuet",className:"sponsor-text","data-ta-id":"sponsor-text",children:m.ag.get("playlist.presented_by",r)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:()=>{u((0,k.kh)(v("event_clicked",o,c))),y(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:s,alt:r,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),S&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},y=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((i=>i.ads.sponsoredPlaylist.previewAd||i.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,n.useEffect)((()=>{a||i((0,k.fd)(e))}),[i,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(S,{...a})}):null},h=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,n.useEffect)((()=>{a||i((0,k.z8)())}),[i,a]);const s=l||a&&((e,i)=>{const a=Date.now()/1e3,n=e.split(":"),t=n[n.length-1];return i.some((({playlistId:e,endTime:i,startTime:n})=>e===t&&a>=n&&a<(i||a+1)))})(e,a);return s?(0,p.jsx)(y,{playlistUri:e}):null};var g=a(18270),N=a(43683),b=a(48690),f=a(35410),x=a(20534),T=a(70369),C=a(98778),j=a(21317),F=a(34011),R=a(4383);const A="hOOwEKqNuXrNvOCB1SgZ",D="csEdkIN9z2LjJIuZraqz",E=({uri:e})=>{const[i,a]=(0,R.Z)(e),t=(0,l.k6)(),s=(0,n.useCallback)((()=>{a(!1),t.replace("/collection/playlists")}),[t,a]);return(0,p.jsxs)("div",{className:A,children:[(0,p.jsx)(j.l,{iconSize:64}),(0,p.jsxs)("div",{className:D,children:[(0,p.jsx)(d.D,{as:"p",variant:"canon",children:m.ag.get("forbidden-page.title")}),(0,p.jsx)(d.D,{as:"p",variant:"mesto",children:m.ag.get("forbidden-page.description")})]}),i&&(0,p.jsx)(F.D,{colorSet:"invertedLight",onClick:s,children:m.ag.get("remove_from_your_library")})]})};var I=a(6158),L=a(58679),U=a(55120),P=a(77834),_=a(1838),w=a(22423),V=a(78462),M=a(61412),O=a(12498),B=a(69846),Q=a(57784),W=a(26492),Z=a(4236),K=a(62515),z=a(94349),H=a(53538),G=a(49207),q=a(29255),J=a(44065),X=a(20246),Y=a(32648),$=a(84242),ee=a(72138),ie=a(73893),ae=a(42714),ne=a(28018),te=a(88767),le=a(62830);var se=a(97194),re=a(15852),de=a(92877),oe=a(91028),ce=a(76998),me=a(86025),ue=a(39714),ke=a(6184),pe=a(30645),ve=a(82694);const Se="Uw4gqTFuHRLn4VKga_bJ",ye="SdECNwBCnmkKl0Q0mJff",he="HLkGXLclDq_7guCiD1Xq",ge="vWR6alsFpTlgXUckErqF",Ne="EbHQLci0cfLjHmS0AKp2",be="HzYFPEbZdd6fQW4jfcz4",fe="SQEgwtR2aj51qFj6cMNZ",xe="aaNtMSjjJ4cClWoe6K0k",Te="BhtBJTnsM9AotmyN0MPr",Ce="FwoyMQocCMLEafLlvAk5",je="xcn0geYcJliTHbvcds12",Fe="KptBBI16DBjQBjvPQtlH";function Re(e){const i=(0,n.useRef)(null);return(0,p.jsx)(oe.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,p.jsx)(ce.l,{className:Se,"aria-label":"Example showing onClose property",body:(0,p.jsxs)("div",{className:Te,children:[(0,p.jsx)(me.o,{buttonSize:"md","aria-label":"IconX",iconOnly:ue.k,onClick:e.onClose,className:je}),(0,p.jsx)(me.o,{buttonSize:"md","aria-label":"IconArrowLeft",iconOnly:pe.D,className:Ce}),(0,p.jsx)("div",{className:ye,children:(0,p.jsxs)("div",{className:he,children:[(0,p.jsx)("div",{className:Ne,children:(0,p.jsxs)("div",{className:be,children:[(0,p.jsx)(de.E,{className:fe,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,p.jsx)(de.E,{className:xe,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,p.jsxs)("div",{className:ge,children:[(0,p.jsxs)(d.D,{as:"p",variant:"finaleBold",children:[(0,p.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,p.jsxs)(d.D,{as:"p",variant:"alto",children:["IM IN THE ",(0,p.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,p.jsx)("div",{className:Ne,children:(0,p.jsx)(ve.V,{iconSize:48})})]})}),(0,p.jsx)("div",{className:Fe,children:(0,p.jsx)(F.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const Ae="nTTPGZGk721M6gfldG43",De="BFYSUcA4ifYvgDzOQX5Q",Ee="el9_37CCpYKxCRKDDyww",Ie="FB376b7R1M_0YQZ_SahS",Le="srPBn9_CV0NzQEEzW9f6",Ue="te8Z8OuKxZx1gbjb7_ua",Pe=n.memo((function({setuserView:e}){const[i,a]=(0,n.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[i&&(0,p.jsx)(Re,{onClose:()=>{a(!1)}}),(0,p.jsx)(oe.Y,{center:!0,withPortal:!0,children:(0,p.jsx)(ce.l,{colorSet:"overMedia","aria-label":"Title",body:(0,p.jsx)("div",{children:(0,p.jsx)(d.D,{as:"p"})}),dialogTitle:(0,p.jsxs)("div",{className:Ae,children:[(0,p.jsxs)("div",{className:Ee,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(de.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,p.jsx)(de.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsx)(d.D,{as:"h1",variant:"alto",children:"Rap Caviar"})]}),(0,p.jsxs)("div",{className:De,children:[(0,p.jsx)(me.o,{iconOnly:ue.k,onClick:()=>e(!1),className:Le}),(0,p.jsx)(me.o,{iconOnly:ke.o,className:Ue,onClick:()=>{a(!0)}})]}),(0,p.jsx)("div",{className:Ie,children:(0,p.jsx)(d.D,{as:"p",variant:"ballad",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),_e="__97AKHEfxNtqFsLai1b",we="pzFwHV7jvPlWTI6cG5TV",Ve="iZu1aH8cr2cw98gqmTeo",Me="JRvbfJh7eAZ_1FrQukej";function Oe(){const[e,i]=(0,n.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(Pe,{setuserView:i}),(0,p.jsxs)("button",{className:_e,onClick:()=>i(!0),children:[(0,p.jsxs)("div",{className:we,children:[(0,p.jsx)(de.E,{className:Ve,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(de.E,{className:Ve,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(de.E,{className:Ve,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsxs)("div",{className:Me,children:[(0,p.jsx)(d.D,{as:"p",variant:"mestoBold",children:"View employee leaderboard"}),(0,p.jsx)(d.D,{as:"p",variant:"mesto",children:"You're in the top 21% of listeners."})]})]})]})}var Be=a(86604),Qe=a(98197),We=a(3775);a(98984);const Ze={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},Ke={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...Ze.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},ze={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...Ze.definitions]},He={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...Ze.definitions]};var Ge=a(7073),qe=a(72169),Je=a(42781),Xe=a(23384),Ye=a(38470);function $e(e){return{type:Je.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,qe.NS)(e.coverArt)}}function ei(e){if("Album"!==e.data.__typename)return null;return $e(e.data)}function ii(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:Je.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,qe.NS)(i.visuals.avatarImage)}}function ai(e){if("Episode"!==e.data.__typename)return null;const i=e.data,a=i.podcastV2.data;return"Podcast"!==a.__typename?null:{type:Je.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,qe.NS)(i.coverArt),isExplicit:i.contentRating?.label===Ge.KS.Explicit,is19PlusOnly:i.contentRating?.label===Ge.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:i.playability.playable}}function ni(e){const i=(0,qe.NS)(e.albumOfTrack?.coverArt||null);return{type:Je.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:i.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===Ge.KS.Explicit,is19PlusOnly:e.contentRating?.label===Ge.KS.NineteenPlus}}function ti(e){if("Track"!==e.data.__typename)return null;return ni(e.data)}function li(e){return(e?.itemsV2??[]).map((e=>{const i=(0,qe.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return ei(i);case"ArtistResponseWrapper":return ii(i);case"EpisodeResponseWrapper":return ai(i);case"TrackResponseWrapper":return ti(i);default:return(0,Ye._)(i),null}})).filter(Xe.K)||[]}const si=async(e,i,a=0,n=10,t=10)=>{const l={term:i,offset:a,limit:n,numberOfTopResults:t},s=(await e(Ke,l))?.data.searchV2;return s?(d=i,{albums:(u=(r=s).albums,((u?.items??[]).map((e=>ei(e))).filter(Xe.K)||[])??[]),artists:(m=r.artists,((m?.items??[]).map((e=>ii(e))).filter(Xe.K)||[])??[]),episodes:(c=r.episodes,((c?.items??[]).map((e=>ai(e))).filter(Xe.K)||[])??[]),tracks:(o=r.tracksV2,((o?.items??[]).map((e=>ti(e.item))).filter(Xe.K)||[])??[]),topResults:li(r.topResults)??[],query:d}):null;var r,d,o,c,m,u},ri=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=(await e(ze,t))?.data.albums;return l?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>ni(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Ye._)(i),null}}(l):null},di=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=(await e(He,t))?.data.artists;if(!l)return null;return function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>$e(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>ni(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Ye._)(i),null}}(l)};var oi=a(94184),ci=a.n(oi),mi=a(24697),ui=a(44295);const ki="YAYCVnYpPvmYV4JyTmn5",pi="FeWwGSRANj36qpOBoxdx",vi="_h5mio6VqcL_fmiXAb1S",Si="Hfgj4Zbb2ijt8g54MlCA",yi="sgZ_MgcS1NlccH19fYsa",hi="JzyZE2R09wq7xtjECDeR",gi=n.memo((function({placeholder:e,onChange:i=(()=>{}),onFocus:a=(()=>{})}){const[t,l]=(0,n.useState)(""),s=(0,n.useRef)(null),r=(0,mi.y1)((e=>{i(e)}),200),o=(0,n.useCallback)((e=>{const i=e.currentTarget.value;l(i),r(i)}),[l,r]),c=(0,n.useCallback)((()=>{s.current&&s.current.focus(),l(""),i("")}),[l,i]),u=(0,n.useCallback)((e=>{"Escape"===e.key&&t&&c()}),[t,c]);return(0,p.jsxs)("div",{className:ki,role:"search",children:[(0,p.jsx)(d.D,{as:"input",variant:"mesto",ref:s,className:ci()(pi),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:o,onKeyDown:u,onFocus:a,value:t}),(0,p.jsxs)("div",{className:vi,children:[(0,p.jsx)("span",{className:Si,children:(0,p.jsx)(ui.j,{iconSize:16,className:yi,"aria-hidden":"true"})}),t&&(0,p.jsx)("button",{className:hi,onClick:c,"aria-label":m.ag.get("search.a11y.clear-input"),children:(0,p.jsx)(ue.k,{iconSize:16})})]})]})}));var Ni=a(63766);const bi=({renderRow:e,searchResults:i,renderSeeAllRow:a,seeAllXList:n})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ni.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("search.title.all"),renderRow:a,rowPlaceholder:Ni.hU,nrTracks:n.length,tracks:n,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]}),fi=({renderRow:e,searchResults:i})=>(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ni.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD]}),xi=({renderRow:e,searchResults:i})=>{const a=i.filter((e=>e.type===Je.p.TRACK)),n=i.filter((e=>e.type===Je.p.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(d.D,{as:"p",variant:"cello",className:P.Z.artistResultListTitle,children:m.ag.get("playlist.curation.popular_songs")}),(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Ni.hU,nrTracks:a.length,tracks:a,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD]}),(0,p.jsx)(d.D,{as:"p",variant:"cello",className:P.Z.artistResultListTitle,children:m.ag.get("playlist.curation.albums")}),(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Ni.hU,nrTracks:n.length,tracks:n,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD]})]})},Ti=({renderRow:e,searchResults:i})=>(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ni.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD]}),Ci=({renderRow:e,searchResults:i})=>(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ni.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD]}),ji=({renderRow:e,searchResults:i})=>(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ni.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD]});var Fi=a(70325);const Ri="G2t3w2AAeb5OXp0_GeWs",Ai="saVjTFMyWYUz975_tkQm",Di="thi8fNCkEhutRkDC90c0",Ei="pHVlkChuJpEnBQyU3ADv",Ii="ENWs3JxcqtD98_8fbPz2",Li="L8IUKEJL6JiTyE_qUVCc",Ui="XcyjdXgsNX0DBt72tfiD",Pi="VhJnuS7UcUPfIlzD8dlU",_i="He29vQ5anFj_bJ5iEaI2",wi=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,p.jsx)(Fi.RX,{className:Ii,rowIndex:i,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${m.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:_i,onClick:n,children:[(0,p.jsxs)(Fi.id,{columnIndex:0,className:Li,children:[void 0!==t?(0,p.jsx)("img",{className:Di,src:t,alt:e.name}):null,(0,p.jsxs)("div",{className:Ui,children:[(0,p.jsx)(d.D,{as:"p",className:Ei,variant:"ballad",children:e.name}),(0,p.jsx)(d.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:m.ag.get("album")})]})]}),(0,p.jsx)(Fi.id,{columnIndex:1}),(0,p.jsx)(Fi.id,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Pi,onClick:n,children:a?(0,p.jsx)(Qe.e,{}):(0,p.jsx)(Be.V,{})})})]})})};var Vi=a(39278);const Mi=({size:e})=>(0,p.jsx)("div",{className:Ai,children:(0,p.jsx)(Vi.a,{iconSize:e})}),Oi=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,p.jsx)(Fi.RX,{className:Ii,rowIndex:i,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${m.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:_i,onClick:n,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Fi.id,{columnIndex:0,className:Li,children:[void 0!==t?(0,p.jsx)("img",{className:Ri,src:t,alt:e.name}):(0,p.jsx)(Mi,{size:16}),(0,p.jsxs)("div",{className:Ui,children:[(0,p.jsx)(d.D,{as:"p",className:Ei,variant:"ballad",children:e.name}),(0,p.jsx)(d.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:m.ag.get("artist")})]})]}),(0,p.jsx)(Fi.id,{columnIndex:1}),(0,p.jsx)(Fi.id,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Pi,onClick:n,children:a?(0,p.jsx)(Qe.e,{}):(0,p.jsx)(Be.V,{})})})]})})},Bi=({episode:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,p.jsx)(Ni.YK,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:n}),Qi=({label:e,index:i,isRTL:a,onClick:n})=>(0,p.jsx)(Fi.RX,{className:Ii,rowIndex:i,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:_i,onClick:n,children:[(0,p.jsx)(Fi.id,{columnIndex:0,className:Li,children:(0,p.jsx)(d.D,{as:"p",className:Ei,variant:"ballad",children:e})}),(0,p.jsx)(Fi.id,{columnIndex:1}),(0,p.jsx)(Fi.id,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:Pi,onClick:n,children:a?(0,p.jsx)(Qe.e,{}):(0,p.jsx)(Be.V,{})})})]})}),Wi=({track:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,p.jsx)(Ni.cp,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:n});let Zi;!function(e){e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS"}(Zi||(Zi={}));const Ki=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:Zi.SEARCH,term:i.term,title:""}]}),e),zi=({resultList:e,level:i,isRTL:a,playlistUri:t,navToResults:l,navToEntity:s,term:o})=>{let c=e;const u=(e=>e.filter((e=>e.type===Je.p.TRACK||e.type===Je.p.EPISODE)).map((({uri:e,id:i})=>({type:r().isTrack(e)?Je.p.TRACK:Je.p.EPISODE,uri:e,uid:i,provider:null}))))(e),{usePlayContextItem:k}=(0,$.n)({uri:`${t.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${i?.navType??0}`,pages:[{items:u}]},{featureIdentifier:"search"}),v=(0,n.useCallback)(((e,i)=>(0,p.jsx)(Qi,{isRTL:a,index:i,label:e.label,onClick:()=>{l({navType:e.type,term:o,title:e.label})}},e.uri)),[a,l,o]),S=(0,n.useCallback)(((e,i)=>e.type===Je.p.ARTIST?(0,p.jsx)(Oi,{isRTL:a,index:i,searchResult:e,onClick:()=>{s({navType:Zi.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Je.p.EPISODE?(0,p.jsx)(Bi,{index:i,episode:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:k},e.uri):e.type===Je.p.TRACK?(0,p.jsx)(Wi,{index:i,track:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:k},e.uri):(0,p.jsx)(wi,{index:i,isRTL:a,searchResult:e,onClick:()=>{s({navType:Zi.ALBUM,uri:e.uri,title:e.name})}},e.uri)),[a,s,t,k]);if(""===o)return(0,p.jsx)("div",{className:P.Z.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:P.Z.emptyStateContainer,children:[(0,p.jsx)(d.D,{as:"h1",variant:"canon",children:m.ag.get("search.empty-results-title",o)}),(0,p.jsx)(d.D,{as:"p",variant:"mesto",children:m.ag.get("search.empty-results-text")})]});if(i?.navType===Zi.SEARCH){const i=[{type:Zi.ARTISTRESULTS,label:m.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:Zi.ALBUMRESULTS,label:m.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:Zi.TRACKRESULTS,label:m.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return c=e,(0,p.jsx)(bi,{renderRow:S,searchResults:c,renderSeeAllRow:v,seeAllXList:i})}return i?.navType===Zi.ALBUM?(0,p.jsx)(fi,{renderRow:S,searchResults:c}):i?.navType===Zi.ARTIST?(0,p.jsx)(xi,{renderRow:S,searchResults:c}):i?.navType===Zi.ALBUMRESULTS?(0,p.jsx)(Ti,{renderRow:S,searchResults:c}):i?.navType===Zi.TRACKRESULTS?(0,p.jsx)(Ci,{renderRow:S,searchResults:c}):i?.navType===Zi.ARTISTRESULTS?(0,p.jsx)(ji,{renderRow:S,searchResults:c}):null},Hi=({playlistUri:e,onCurationModeChange:i})=>{const[a,l]=(0,n.useState)([]),[s,r]=(0,n.useState)(),o=(0,t.v9)((e=>e.ui.textDirection.isRTL)),{level:c,changeTerm:u,goBack:k,navToEntity:v,navToResults:S,term:y}=(()=>{const[e,i]=(0,n.useReducer)(Ki,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:h}=(0,n.useContext)(We.Ax);return(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(c)switch(c.navType){case Zi.SEARCH:try{if(!s||s.query!==y&&""!==y){const i=await si(h,y);e&&r(i)}else""===y&&l([])}catch{l([])}s&&l(s.topResults);break;case Zi.ARTISTRESULTS:s&&l(s?.artists);break;case Zi.ALBUMRESULTS:s&&l(s?.albums);break;case Zi.TRACKRESULTS:s&&l(s?.tracks);break;case Zi.EPISODERESULTS:s&&l(s?.episodes);break;case Zi.ALBUM:try{const i=await ri(h,c.uri,100,0);e&&i&&l(i.tracks)}catch{l([])}break;case Zi.ARTIST:try{const i=await di(h,c.uri,100,0);e&&i&&l([...i.albums,...i.tracks])}catch{l([])}}})(),()=>{e=!1}}),[c,y,s,h]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{className:P.Z.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:P.Z.playlistInlineCurationWrapper,children:[(0,p.jsx)(d.D,{as:"h1",className:P.Z.playlistInlineCurationTitle,variant:"canon",children:m.ag.get("playlist.curation.title")}),(0,p.jsx)(n.Suspense,{fallback:null,children:(0,p.jsx)(gi,{placeholder:m.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{i(!0)},onChange:e=>{u(e)}})})]}),(0,p.jsx)("button",{className:P.Z.playlistInlineCurationCloseButton,onClick:()=>i(!1),children:(0,p.jsx)(ue.k,{"aria-label":m.ag.get("close")})})]}),null!==c&&c.navType!==Zi.SEARCH?(0,p.jsxs)("button",{className:P.Z.playlistInlineCurationBackButton,onClick:()=>k(),children:[o?(0,p.jsx)(Be.V,{"aria-label":m.ag.get("navbar.go-back"),className:P.Z.icon}):(0,p.jsx)(Qe.e,{"aria-label":m.ag.get("navbar.go-back"),className:P.Z.icon}),(0,p.jsx)(d.D,{as:"p",variant:"cello",children:c.title})]}):null,(0,p.jsx)("div",{className:P.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(zi,{playlistUri:e,term:y,level:c,resultList:a,navToEntity:v,navToResults:S,isRTL:o})})]})};var Gi=a(42922),qi=a(49961);const Ji=new Set(V.RJ),Xi=new Set([]),Yi={column:null,order:Ni.kn.NONE},$i=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,rankType:t,scrollToUid:l,usePlayContextItem:s,tracklistDomRef:r}){const d=(0,n.useContext)(ee.ZF),{filter:o,setFilter:c}=(0,n.useContext)(w.fo),m=(0,n.useRef)(null),u=(0,n.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,ne.r)(a,u);const{sortState:k,setSortState:v}=(0,n.useContext)(V.Gb),S=(0,n.useCallback)((e=>{v((0,_.VK)(e,k))}),[k,v]);(0,n.useEffect)((()=>{v(Yi),c("")}),[a,c,v]),(0,n.useEffect)((()=>{m.current&&l&&m.current.scrollToItem({uid:l})}),[l]);const y=(0,n.useCallback)((async(e,i)=>{const n=await d.getContents(a,{offset:e,limit:i,sort:(0,_._j)(k),filter:o,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[a,d,k,o]),h="plays"===t,g=(0,n.useCallback)(((e,i)=>{const n=(0,qi.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(Ni.h_,{index:i,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",statusChange:e.formatListAttributes?.status,showPlayCount:h,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:s},i+e.uri)}),[a,h,s]),N=(0,n.useMemo)((()=>h?[Ni.QD.INDEX,Ni.QD.TITLE,Ni.QD.PLAYS,Ni.QD.ALBUM,Ni.QD.DURATION]:[Ni.QD.INDEX,Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.DURATION]),[h]),b=(0,n.useCallback)((e=>e.uri),[]),f=(0,n.useCallback)((e=>e.id),[]);return(0,p.jsx)(Gi.ZP,{value:"chart-tracklist",children:(0,p.jsx)(Ni.Pv,{ariaLabel:e,hasHeaderRow:!0,columns:N,sortableColumns:d.getCapabilities().canSort?Ji:Xi,sortState:k,onSort:S,renderRow:g,resolveUri:b,resolveUid:f,nrTracks:i,fetchTracks:y,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:r},a)})}));var ea=a(47647),ia=a(51674),aa=a(51627);const na="x-contributorButton-button",ta="x-contributorButton-ContributorButton",la=({uri:e,label:i,onClick:a,...n})=>{const{onCopyLink:t}=(0,aa.l)({uri:e,permissionLevel:"CONTRIBUTOR"});return(0,p.jsx)(ia._,{label:i,children:(0,p.jsx)("button",{className:na,onClick:e=>{a?.(e),t?.()},"aria-label":i,children:(0,p.jsx)(ea.t,{...n,className:ta,iconSize:32,"aria-hidden":"true"})})})};var sa=a(40786),ra=a(98816),da=a(98562),oa=a(35213);const ca=n.memo((({metadata:e,tracklistDomRef:i})=>{const{hasEpisodes:a,isCollaborative:t,formatListData:l,hasDateAdded:s,collaborators:r}=e,d="chart"===l?.type,o="live-streams"===l?.type,c=["blend","celebrity-blend","friends-mix"].indexOf(l?.type||"")>-1,u=!!a,{spec:k,logger:v}=(0,re.fU)(ra.createDesktopSearchBarEventFactory,{}),S=(0,n.useCallback)((()=>{v.logInteraction(k.filterFieldFactory().keyStrokeFilter())}),[v,k]),y=(0,n.useCallback)((()=>{v.logInteraction(k.filterFieldFactory().hitClearFilter())}),[v,k]),h=(0,n.useCallback)((()=>{v.logInteraction(k.sortButtonFactory().hitSort())}),[v,k]),g=(0,n.useMemo)((()=>((e,i,a,n,t,l,s)=>e?V.RJ:(0,_.RG)(i,a,n,t,l,s))(d,t,u,s,o,c,r?.count??1)),[d,t,u,s,o,c,r]);return(0,p.jsxs)("div",{className:P.Z.searchBoxContainer,children:[(0,p.jsx)(n.Suspense,{fallback:null,children:(0,p.jsx)(da.K,{placeholder:m.ag.get("playlist.search_in_playlist"),onFilter:S,onClear:y,clearOnEscapeInElementRef:i})}),(0,p.jsx)(oa.l,{columns:g,onSort:h})]})}));var ma=a(61728),ua=a(82760);const ka="multiUserAttributionDisplayNamesV2";var pa=a(59916);function va(e){return(0,pa.MW)(e)||(0,pa.JF)(e)}const Sa=new Set(V.zq),ya=new Set([]),ha=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,playlistName:l,isCollaborative:s,isMixedMedia:d,isLive:o,isBlend:c,hasDateAdded:k,canEdit:v,scrollToUid:S,feedbackPath:y,deleteFeedbackPath:h,usePlayContextItem:g,tracklistRef:N,tracklistDomRef:b,nrCollaborators:f=1,canRemove:x,spec:T,initialItems:C}){const j=(0,re.$P)(),F=(0,n.useContext)(ee.ZF),{filter:R}=(0,n.useContext)(w.fo),{sortState:A,setSortState:D}=(0,n.useContext)(V.Gb),E=(0,n.useRef)((()=>{})),[I,L]=(0,n.useState)([]),U=(0,t.I0)(),P=(0,n.useCallback)((()=>{N?.current&&N.current.update()}),[N]);(0,ee.rZ)(a,P);const M=(0,n.useCallback)(((e,i)=>{D((0,_.VK)(e,A)),j.logInteraction(T.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[D,A,j,T]),O=(0,n.useCallback)((e=>{E.current(),F.remove(a,e)}),[F,a]),B=(0,n.useCallback)(((e,i,a=!1)=>{x&&(E.current=i,e.length>1&&!a?L(e):O(e))}),[x,O]);(0,n.useEffect)((()=>{N?.current&&S&&N.current.scrollToItem({uid:S})}),[S,N]);const W=(0,n.useCallback)((async(e,i)=>{const n=await F.getContents(a,{offset:e,limit:i,sort:(0,_._j)(A),filter:R,decorateFormatListData:!!y||o||c});return{items:n.items,totalLength:n.totalLength}}),[a,F,A,R,y,o,c]),Z=(0,n.useCallback)(((e,i,n)=>{if(!N?.current)return;const t=N.current.getRows()[i]?.id;t&&(j.logInteraction(T.dragSort()),n===ua.W.Before?F.move(a,e,{before:t}):F.move(a,e,{after:t}))}),[N,j,T,F,a]),K=(0,n.useCallback)(((e,i,n)=>{if(!N?.current)return;const t=N.current.getRows()[i]?.id;t&&(j.logInteraction(T.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),n===ua.W.Before?U((0,u.jV)(a,e,{before:t})):U((0,u.jV)(a,e,{after:t})))}),[N,j,T,a,U]),z=(0,n.useCallback)((()=>{F.resync(a)}),[F,a]),H=(0,n.useCallback)(((e,i)=>{let n,t;const m=!!(0,pa.JF)(e)&&e.podcastSubscription.isUserSubscribed;(0,pa.JF)(e)?(n=e.show,t=e.images.concat(e.show.images)):(0,pa.MW)(e)&&(n=e.album,t=e.album?.images);const u=(0,qi.X)(t,{desiredSize:40,desiredLabel:"small"});let k=[];v&&A.order===Ni.kn.NONE&&(k=[Q.aN[r().Type.TRACK],Q.aN[r().Type.LOCAL],Q.aN[r().Type.EPISODE]]);const S="1"===e?.formatListAttributes?.["dislike-feedback-selected"];let N=!1;(0,pa.JF)(e)&&e.podcastSubscription.isPaywalled&&!m?N=!0:va(e)&&(N=e.isPlayable&&!S);const b=c&&((e,i)=>{const a=[];if(!i)return a;const n=i?.[i[ka]?ka:"multiUserAttributionDisplayNames"]?.split(","),t=i?.multiUserAttributionImages?.split(",");if(!n||!t)return a;const l=i?.multiUserAttributionUsernamesV2?.split(",")||[],s=i?.multiUserAttributionType?.split(",")||[],d=n.length;for(let e=0;e<d;e++){const i=l[e],d=i&&r().profileURI(i).toURI();a.push({username:i,uri:d,displayName:n[e],images:(o=t[e],o.length>1?[{url:o}]:[]),recsplanation:s[e]})}var o;return a.sort(((i,a)=>i.username?i.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];return(0,p.jsx)(Ni.dx,{index:i,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid??void 0,id:e.id,isPlayable:N,duration_ms:va(e)?e.duration.milliseconds:0,isPaywalled:!!(0,pa.JF)(e)&&e.podcastSubscription.isPaywalled,isUserSubscribed:m,name:va(e)?e.name:"",artists:(0,pa.MW)(e)?e.artists:void 0,albumOrShow:n,isExplicit:(0,pa.MW)(e)&&e.isExplicit,isCollaborative:s,nrCollaborators:f,isMixedMedia:d,isLocal:(0,pa.MW)(e)&&e.isLocal,addedBy:b,hasDecoratedAddedBy:F.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,pa.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,pa.MW)(e)||(0,pa.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:u?.url||"",onMove:Z,onInsert:K,usePlayContextItem:g,allowedDropTypes:k,feedbackPath:y,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:h,isDisliked:S,isLive:o,isBlend:c,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:x,onFeedbackClick:z,playlistName:l},i+e.uri)}),[v,A.order,c,a,s,f,d,F,Z,K,g,y,h,o,x,z,l]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Gi.ZP,{value:"playlist-tracklist",children:(0,p.jsx)(Ni.Pv,{testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:(0,_.RG)(s,d,k,o,c,f),sortableColumns:F.getCapabilities().canSort?Sa:ya,sortState:A,onSort:M,onRemove:B,renderRow:H,resolveUri:e=>e.uri,resolveUid:e=>e.id,nrTracks:i,fetchTracks:W,limit:100,canFetchAllTracks:F.getCapabilities().canFetchAllTracks,outerRef:N,outerDomRef:b,tracks:C},a)}),(0,p.jsx)(ma.h,{title:m.ag.get("playlist.remove_from_playlist",l),isOpen:I.length>0,tracks:I,onClose:e=>{e.stopPropagation(),L([])},onRemove:O})]})}));var ga=a(27826),Na=a(61634);const ba=n.memo((function({playlistUri:e,playlistLength:i}){const{tracks:a,refresh:t}=((e,i=10)=>{const a=2*i,t=3*i,l=(0,n.useRef)(0),[s,r]=(0,n.useState)(e),[d,o]=(0,n.useState)([]),m=(0,n.useRef)([]),u=(0,n.useContext)(ae.Z),{spec:k,logger:p}=(0,re.fU)(c.createDesktopPlaylistEventFactory,{data:{uri:e}}),v=(0,n.useMemo)((()=>k.recommendedFactory()),[k]);(0,n.useEffect)((()=>{const i=u.getEvents(),a=i=>{i.data.uri===e&&o((e=>e.filter((e=>i.data.items.every((i=>i.uri!==e.uri))))))};return i.addListener(Na.XL.OPERATION_COMPLETE,a),()=>{i.removeListener(Na.XL.OPERATION_COMPLETE,a)}}),[u,e]),(0,n.useEffect)((()=>(o([]),r(e),m.current=[],l.current=l.current+1,()=>{l.current=l.current+1})),[e]),(0,n.useEffect)((()=>{if(d.length<a){const e=Math.min(a,t-d.length),i=l.current;u.getRecommendedTracks(s,m.current,e).then((a=>{if(i!==l.current)return;const n=a.map((e=>e?.uri&&ga.o.from(e.uri).id)).filter((e=>null!==e));a.length<e&&m.current.length?m.current=[]:m.current=[...m.current,...n],o((e=>[...e,...a]))}))}}),[a,t,u,s,d.length]);const S=(0,n.useCallback)((()=>{if(k){const e=v.refreshButtonFactory().hitRefreshContent();p.logInteraction(e)}o((e=>e.slice(i)))}),[p,v,k,i]);return{tracks:d.slice(0,i),_bufferedTracks:d.slice(i),refresh:S}})(e),l=!i||0===i,{usePlayContextItem:s}=(0,$.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:Je.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),r=(0,n.useCallback)(((i,a)=>(0,p.jsx)(Ni.cp,{index:a,imgUrl:i.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:i.uri,isPlayable:!i.isMOGEFRestricted,name:i.name,artists:i.artists,album:{...i.album,imgUrl:i.album.imageUrl},isExplicit:i.explicit,isMOGEFRestricted:i.isMOGEFRestricted,usePlayContextItem:s},`${a}-${i.uri}`)),[e,s]),o=(0,n.useMemo)((()=>[Ni.QD.TITLE,Ni.QD.ALBUM,Ni.QD.ADD]),[]),u=(0,n.useCallback)((e=>e.uri),[]),k=(0,n.useCallback)((e=>e.id),[]),v=(0,n.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return a.length>0?(0,p.jsxs)("div",{className:P.Z.recommendedTrackList,children:[(0,p.jsx)("div",{className:P.Z.top,children:(0,p.jsxs)("div",{className:P.Z.header,children:[(0,p.jsx)(d.D,{variant:"canon",children:m.ag.get("playlist.extender.recommended.title")}),(0,p.jsx)(d.D,{variant:"mesto",className:P.Z.subtitle,children:l?m.ag.get("playlist.extender.title.in.playlist"):m.ag.get("playlist.extender.songs.in.playlist")})]})}),a.length?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ni.Pv,{ariaLabel:m.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Ni.hU,tracks:v,renderRow:r,resolveUri:u,resolveUid:k,columns:o},`${e}-recommended`),(0,p.jsx)(me.o,{className:P.Z.refreshButton,onClick:t,children:m.ag.get("playlist.extender.refresh")})]}):null]}):null})),fa=n.lazy((()=>Promise.all([a.e(1814),a.e(2716),a.e(7405)]).then(a.bind(a,82716)))),xa=n.lazy((()=>a.e(7427).then(a.bind(a,61991)))),Ta=n.memo((function({playlist:e,capabilities:i}){const{metadata:{uri:a,name:s,images:k,totalLength:v,isOwnedBySelf:S,isCollaborative:y,hasEpisodes:j,hasSpotifyTracks:F,canAdd:A,canRemove:D,canPlay:E,formatListData:I,hasDateAdded:B,collaborators:ee},contents:{items:ae}}=e,{spec:ne,logger:te,UBIFragment:le}=(0,re.fU)(c.createDesktopPlaylistEventFactory,{data:{uri:a}}),se=(0,Z.k)(),de=n.useMemo((()=>ne.headerFactory()),[ne]),oe=n.useMemo((()=>ne.tracklistFactory()),[ne]),ce="chart"===I?.type,me="live-streams"===I?.type,ue=["blend","celebrity-blend","friends-mix"].indexOf(I?.type||"")>-1,ke=!!j,pe=I?.attributes||{},ve=pe.header_image_url_desktop||pe.image_url||null,Se=A&&D,{inlineCurationModeIsOn:ye,handleInlineCurationModeChange:he}=((e,i)=>{const[a,t]=(0,n.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,n.useContext)(Y.VX),s=(0,n.useRef)(a);return(0,n.useEffect)((()=>{const e=!s.current;l&&e&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),s.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{t(e)}}})(Se,v),ge=i.canFilter&&v>0,Ne=i.canSort&&v>0,be=v>0,{productState:fe}=(0,t.v9)(q.Gg),xe=!!fe&&parseInt(fe.ads,10)>0,Te=(0,t.I0)(),Ce=(0,l.k6)(),je=(0,o.W6)(G.v8),Fe="POP"!==Ce.action?new URLSearchParams(Ce.location.search).get("uid"):null,[Re,Ae]=(0,R.Z)(a),De=(0,W.o)(),{filter:Ee}=(0,n.useContext)(w.fo),{sortState:Ie}=(0,n.useContext)(V.Gb),Le=(0,n.useRef)(null),Ue=(0,n.useRef)(null),[Pe]=k,_e=(0,K.Z)(null!==ve?ve:Pe?.url||null),we=n.useMemo((()=>ne.actionBarFactory()),[ne]),{isPlaying:Ve,isActive:Me,togglePlay:Be,usePlayContextItem:Qe}=(0,$.n)((0,ie.U)(a,(0,_._j)(Ie),Ee),{featureIdentifier:"playlist"}),We=(0,n.useCallback)((()=>{const e=(0,H.aK)({isPlaying:Ve,isActive:Me,spec:we.playButtonFactory(),logger:te,uri:a});Be({loggingParams:e})}),[Ve,Me,Be,we,te,a]),Ze=(0,n.useCallback)((async()=>{De({targetUri:a,intent:Re?"unsave":"save",type:"click"});try{await Ae(!Re)}catch{}}),[Re,De,Ae,a]),Ke=(0,n.useCallback)((()=>{const e=we.shareButtonFactory().hitShare({entityToBeShared:a,shareId:""});te.logInteraction(e)}),[we,te,a]),ze=(0,n.useCallback)((()=>{let e;const i=we.heartButtonFactory();e=Re?i.hitRemoveLike({itemNoLongerLiked:a}):i.hitLike({itemToBeLiked:a}),te.logInteraction(e),Ze()}),[we,Ze,Re,te,a]),He=(0,n.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>r().from(e))).filter((e=>r().isTrack(e)||r().isEpisode(e)||r().isLocalTrack(e)));if(i.length>0&&A){const e=i.map((e=>e.toURI())),n=Le.current?.getSelected()?.slice(-1)?.[0],t={after:n?.uid||"end"};Te((0,u.jV)(a,e,t))}}),[A,Te,a]);(0,z.aw)(He);const Ge=(0,n.useCallback)(((e,i)=>{const n=[...i[Q.aN[r().Type.TRACK]]||[],...i[Q.aN[r().Type.LOCAL]]||[],...i[Q.aN[r().Type.EPISODE]]||[],...i[Q.aN[r().Type.ALBUM]]||[]];n.length>0&&A&&(te.logInteraction(ne.dragAddToPlaylist({playlist:a,itemToBeAdded:n[0]})),Te((0,u.jV)(a,n)),De({targetUri:a,intent:"add",type:"drop"}))}),[A,te,ne,a,Te,De]);return(0,p.jsxs)(n.Suspense,{fallback:null,children:[(0,p.jsx)(T.$,{children:m.ag.get("playlist.page-title",s)}),(0,p.jsx)(x.Z,{types:[Q.aN[r().Type.TRACK],Q.aN[r().Type.LOCAL],Q.aN[r().Type.EPISODE],Q.aN[r().Type.ALBUM]],onDrop:Ge,children:(0,p.jsxs)("section",{role:"presentation",className:P.Z.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,p.jsx)(sa.s,{metadata:e.metadata,isPlaying:Ve,togglePlay:We,backgroundColor:_e,spec:de}),(0,p.jsxs)("div",{className:P.Z.playlistContent,children:[(0,p.jsxs)(g.o,{backgroundColor:_e,children:[(0,p.jsxs)(g.F,{children:[E?(0,p.jsx)(U.$,{onClick:We,isPlaying:Ve,size:"lg",uri:a,ariaPlayLabel:m.ag.get("playlist.a11y.play",s),ariaPauseLabel:m.ag.get("playlist.a11y.pause",s)}):null,S&&F&&(0,p.jsx)(O.v,{uri:a,renderEnabled:()=>(0,p.jsx)(M.v,{uri:a})}),S?null:(0,p.jsx)(C.r,{children:(0,p.jsx)(J.H,{isAdded:!!Re,onClick:ze,size:J.q.md})}),(0,p.jsx)(N.o,{uri:a,isFollowing:!!Re,canDownload:be,onClick:(e,i)=>(0,H.l7)(i,we.downloadButtonFactory(),te,a),onFollow:Ze,size:N.q.md}),(0,p.jsx)(L.F,{property:G.bM,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions?(0,p.jsx)(la,{onClick:Ke,label:m.ag.get("permissions.invite-collaborators",s),uri:a}):null}),(0,p.jsx)(X.y,{onShow:()=>(0,H.qq)(we,te),menu:(0,p.jsx)(f.X,{uri:a}),children:(0,p.jsx)(b.z,{label:m.ag.get("more.label.context",s)})}),ge&&Ne&&(0,p.jsx)(le,{spec:we,children:(0,p.jsx)(ca,{metadata:e.metadata,tracklistDomRef:Ue})})]}),je&&(0,p.jsx)(Oe,{})]}),(0,p.jsx)(n.Suspense,{fallback:null,children:(0,p.jsx)(xa,{formatListData:e.metadata.formatListData})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[xe?(0,p.jsx)(h,{playlistUri:a}):null,v>0&&(0,p.jsx)(n.Suspense,{fallback:null,children:(0,p.jsx)(le,{spec:oe,children:ce?(0,p.jsx)($i,{ariaLabel:s,nrTracks:v,playlistUri:a,rankType:pe.rank_type||"",scrollToUid:Fe,usePlayContextItem:Qe,tracklistDomRef:Ue},a):(0,p.jsx)(ha,{ariaLabel:s,nrTracks:v,playlistUri:a,playlistName:s,hasDateAdded:B,isCollaborative:y,isMixedMedia:ke,isLive:me,isBlend:ue,canEdit:Se,scrollToUid:Fe,feedbackPath:pe["dislike-endpoint"],deleteFeedbackPath:pe["delete-endpoint"],usePlayContextItem:Qe,tracklistRef:Le,tracklistDomRef:Ue,nrCollaborators:ee?.count,canRemove:D,spec:oe,initialItems:ae},a)})}),S&&(0,p.jsx)(n.Suspense,{fallback:null,children:ye?(0,p.jsx)(Hi,{playlistUri:a,onCurationModeChange:he}):(0,p.jsx)("button",{className:P.Z.seeMore,onClick:()=>{he(!0)},children:(0,p.jsx)(d.D,{as:"div",variant:"minuetBold",children:m.ag.get("playlist.curation.find_more")})})}),Se&&!ye&&se?(0,p.jsx)(ba,{playlistUri:a,playlistLength:e.metadata.totalLength}):null]})]})]})})]})})),Ca=n.memo((function({uri:e}){const{search:i}=(0,l.TH)(),a=(0,o.W6)(G.bM),s=(0,n.useContext)(ee.ZF).getCapabilities(),{isAnonymous:r}=(0,t.v9)(q.Gg),{isEnhanced:d}=(0,B.U)(e),{filter:c}=(0,n.useContext)(w.fo),{sortState:u}=(0,n.useContext)(V.Gb),k=((e,i,a)=>{const t=(0,n.useContext)(ae.Z),l=(0,te.useQueryClient)(),s=(0,n.useRef)(i?.withSync),r=(0,le.jP)((()=>["usePlaylist",e,i,a]),[e,i,a]),{data:d}=(0,te.useQuery)(r(),(()=>t.getPlaylist(e,{...i,withSync:s.current},a)),{cacheTime:36e5,keepPreviousData:!0}),o=(0,n.useCallback)((()=>{s.current=!1,l.invalidateQueries(r())}),[l,r]);return(0,ne.r)(e,o),d??null})(e,{decorateFormatListData:!0,withSync:!0,hydrateCollaboratorsWithMembers:a},{offset:0,limit:25,sort:(0,_._j)(u),filter:c});return(0,n.useEffect)((()=>{const a=new URLSearchParams(i).get("prid");if(!r&&a){const i=`https://spclient.wg.spotify.com/algotorial-sharing-service/v1/shared?playlistId=${e}&sharedEntityUri=${a}`;(0,se.k)().request(i,{method:"POST",authorize:!0,allowOffline:!0})}}),[e,r,i]),k?k.metadata.permissions&&!k.metadata.permissions.canView?(0,p.jsx)(E,{uri:e}):(0,p.jsx)(O.v,{uri:e,renderEnabled:()=>d?(0,p.jsx)(n.Suspense,{fallback:null,children:(0,p.jsx)(fa,{metadata:k.metadata,capabilities:s,featureIdentifier:"playlist"})}):(0,p.jsx)(Ta,{playlist:k,capabilities:s}),renderDisabled:()=>(0,p.jsx)(Ta,{playlist:k,capabilities:s})}):(0,p.jsx)(I.h,{hasError:!1,errorMessage:m.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),ja=()=>{const{playlistId:e}=(0,l.UO)(),i=r().playlistV2URI((e||"").split("&")[0]).toURI();return(0,p.jsx)(V.kz,{uri:i,children:(0,p.jsx)(w.hz,{uri:i,children:(0,p.jsx)(Ca,{uri:i})})})}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map