"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{99922:(e,t,a)=>{a.d(t,{o:()=>n});var i=a(87577),s=a(49207);function n(){return{version:(0,i.W6)(s.GE)?2:1}}},40771:(e,t,a)=>{a.d(t,{Z:()=>n});var i=a(67892),s=a(85893);const n=({href:e,children:t,...a})=>(0,s.jsx)(i.Z,{to:e,...a,children:t})},43683:(e,t,a)=>{a.d(t,{q:()=>v,o:()=>T});var i=a(67294),s=a(94184),n=a.n(s),r=a(59440),o=a(97081),l=a(96206),c=a(51674),d=a(79896),u=a(26482),p=a(21663),m=a(88387),g=a(75012),h=a(40080),x=a(14130);const y="l_MW0G9qeeCKlVJwBykT",b="x-downloadButton-DownloadButton",k="x-downloadButton-button",j="_APVWqivXc4YqgsnpFkP",f="VmwiDoU6RpqyzK_n7XRO",P="rEx3EYgBzS8SoY7dmC6x";var C=a(85893);let v;!function(e){e[e.xs=16]="xs",e[e.sm=24]="sm",e[e.md=32]="md"}(v||(v={}));const N=e=>{const{currentTarget:t,detail:a}=e;a>0&&t&&t.blur()},T=({uri:e,isFollowing:t,canDownload:a=!0,onFollow:s,size:T=v.sm,className:I,onClick:S=(()=>{}),showUpsell:U=!0})=>{const w={"--size":`${T}px`},[E,D]=(0,i.useState)(!1),{capability:M,availability:A,addDownload:L,removeDownload:R}=(0,p._)(e),O=(0,m.A)(e);((e,t)=>{const a=(0,x.r)(),s=(0,i.useRef)(!1);(0,i.useEffect)((()=>{e===u.Om.DOWNLOADING&&!1===s.current&&(s.current=!0,a.say(l.ag.get("download.downloading",t.totalItems)))}),[a,e,t]);const n=(0,h.D)(e);(0,i.useEffect)((()=>{n===u.Om.DOWNLOADING&&e===u.Om.YES&&(s.current=!1,a.say(l.ag.get("download.complete")))}),[a,n,e])})(A,O);const B=(0,i.useCallback)((e=>{e.preventDefault(),M===u.PQ.NO_PERMISSION?S(e,u.mc.NO_PERMISSION):(!1===t?(s(),D(!0)):L(),S(e,u.mc.ADD)),N(e)}),[L,M,t,S,s]),F=(0,i.useCallback)((e=>{e.preventDefault(),R(),N(e),S(e,u.mc.REMOVE)}),[R,S]);(0,i.useEffect)((()=>{!0===E&&!0===t&&(L(),D(!1))}),[t,E,L]);const _=A===u.Om.YES;return M===u.PQ.NO_CAPABILITY||M===u.PQ.NO_PERMISSION_HIDE?null:(a||_)&&(M!==u.PQ.NO_PERMISSION||U)?M===u.PQ.NO_PERMISSION?(0,C.jsx)("div",{className:b,children:(0,C.jsx)(d.Nt,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,C.jsx)(d.yv,{children:(0,C.jsx)("span",{children:l.ag.get("download.upsell")})}),renderInline:!1,children:(0,C.jsx)("div",{children:(0,C.jsx)(c._,{label:l.ag.get("download.download"),children:(0,C.jsx)("button",{className:n()(k,I),role:"switch",onClick:B,"aria-label":l.ag.get("download.download"),"aria-checked":!1,children:(0,C.jsx)(r.D,{iconSize:T})})})})})}):_?(0,C.jsx)(c._,{label:l.ag.get("download.remove"),children:(0,C.jsx)("button",{className:n()(k,I,j),role:"switch",onClick:F,"aria-label":l.ag.get("download.remove"),"aria-checked":!0,children:(0,C.jsx)(o.E,{iconSize:T})})}):A===u.Om.NO?(0,C.jsx)(c._,{label:l.ag.get("download.download"),children:(0,C.jsx)("button",{className:n()(k,I),role:"switch",onClick:B,"aria-label":l.ag.get("download.download"),"aria-checked":!1,children:(0,C.jsx)(r.D,{iconSize:T})})}):(0,C.jsxs)("div",{className:n()(f,I),role:"switch","aria-checked":!0,children:[(0,C.jsx)(c._,{label:l.ag.get("download.cancel"),children:(0,C.jsx)("button",{style:w,className:n()(k,y,I),onClick:F,"aria-label":l.ag.get("download.cancel")})}),(0,C.jsx)("span",{style:w,className:n()(P,y),children:(0,C.jsx)(g.e,{"aria-valuetext":l.ag.get("progress.downloading-tracks"),percentage:O.percentage,size:T})})]}):null}},37483:(e,t,a)=>{a.d(t,{p:()=>u,q:()=>l.q});var i=a(67294),s=a(86706),n=a(4383),r=a(67870),o=a(26492),l=a(43683),c=a(85893);const d=i.memo((function({uri:e,size:t=l.q.md,className:a,onClick:d,showUpsell:u}){const[p,m]=(0,n.Z)(e),g=(0,s.I0)(),h=(0,o.o)(),x=(0,i.useCallback)((()=>{h({targetUri:e,intent:p?"remove-from-library":"add-to-library",type:"click"}),m(!p),g(p?(0,r.SS)():(0,r.kK)())}),[h,e,p,m,g]);return(0,c.jsx)(l.o,{className:a,isFollowing:p,onFollow:x,onClick:d,uri:e,size:t,showUpsell:u})})),u=i.memo((function(e){return(0,c.jsx)(d,{...e})}))},23103:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ba});var i=a(67294),s=a(51615),n=a(69518),r=a.n(n),o=a(87577),l=a(97348),c=a(73305),d=a(96206),u=a(70369),p=a(63567),m=a(6158),g=a(86706),h=a(74257),x=a(77995),y=a(84629),b=a(18270),k=a(48690),j=a(22345),f=a(60289),P=a(59482),C=a(72907),v=a(67892),N=a(62515),T=a(32626),I=a(18261),S=a(57978),U=a(26482),w=a(84242),E=a(8341),D=a(5944),M=a(15852),A=a(7073),L=a(13759),R=a(84788),O=a(60410),B=a(40771),F=a(38894),_=a(51441),z=a(79896),K=a(32667),W=a(86025),J=a(34011),Z=a(1447),H=a(9983),q=a(89948),X=a(42781);const Y="u0Jj3wfs4s9tmaXUTK41",$="NSXGSulVKC8FxHx5f1f3",V="PN1uMk_51r_KQvgJ6sCR",G="N6NnRc_msmFFxUoAfuKQ",Q="qaYOSFBanH3vJvosOwsU";var ee=a(85893);const te=({showUri:e})=>{const t=(0,Z.qT)(),a=(0,q.l)(e,!0).data;if(a?.type!==X.p.AUDIOBOOK)return null;const i=a.price?.finalPrice?.amount,s=a.price?.finalPrice?.currency;return i&&s?(0,ee.jsxs)("div",{className:Y,children:[(0,ee.jsx)(K.D,{as:"div",variant:"cello",className:$,children:d.ag.get("web-player.audiobooks.chapterUpsell.title")}),(0,ee.jsx)(K.D,{as:"div",variant:"mesto",className:V,children:d.ag.get("web-player.audiobooks.chapterUpsell.description")}),(0,ee.jsxs)("div",{className:G,children:[(0,ee.jsx)(W.o,{className:Q,buttonSize:"sm",onClick:()=>{t({type:"close"})},children:d.ag.get("action-trigger.button.not-now")}),(0,ee.jsx)(J.D,{buttonSize:"sm",colorSet:"invertedLight",onClick:async()=>{await(0,H.Q)({show_uri:e,currency:s,price:i})},children:d.ag.get("web-player.audiobooks.chapterUpsell.cta")})]})]}):(console.error("Audiobook has no price information."),null)},ae=({children:e,enabled:t,showUri:a,renderInline:i=!0})=>t?(0,ee.jsx)(z.Nt,{trigger:"click",action:"toggle",offset:[-2,20],renderInline:i,content:(0,ee.jsx)(z.yv,{children:(0,ee.jsx)(te,{showUri:a})}),children:e}):(0,ee.jsx)(ee.Fragment,{children:e}),ie=({chapterUri:e,showUri:t,isLocked:a,isPlayDisabled:s,isActive:n,isPlaying:r,togglePlay:o,triggerPlay:l,playButtonPlayLabel:c,playButtonPauseLabel:d,playPositionMs:u,durationMs:p,logger:m,event:g})=>{const h=(0,F.g)(),x=(0,i.useCallback)((t=>{if(a)return void m.logInteraction(g.hitShowPaywall({paywalledItem:e}));let i;n?(i=r?m.logInteraction(g.hitPause({itemToBePaused:e})):m.logInteraction(g.hitResume({itemToBeResumed:e})),o({loggingParams:i})):(i=m.logInteraction(g.hitPlay({itemToBePlayed:e})),l({seekTo:t,loggingParams:i}))}),[a,n,m,g,e,r,o,l]);(0,i.useEffect)((()=>{const e=new URLSearchParams(location.search);if(e.has("t")){const t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=p&&x(a)}}),[p,x]);const y=()=>(0,ee.jsx)(_.JM,{size:_.qE.lg,onClick:()=>{x(u)},isPlaying:r,disabled:s,locked:a,ariaPlayLabel:c,ariaPauseLabel:d});return h?y():(0,ee.jsx)(ae,{showUri:t,enabled:a,renderInline:!1,children:y()})};var se=a(31610);const ne="UVWRbDQd2DM0ShkvMq54",re="Eoy1M3AAKeAUI9cNWsuq",oe="rmgkmccGmTBvrw7gXMyS",le="JKIiOrx9EhZCkyBsu7YI";const ce=i.memo((function({chapter:e}){const{name:t,uri:a,playedState:s,contentRating:n,duration:o,playability:l}=e,c=e.book,u=e.coverArt.length?e.coverArt:c.coverArt||[],p=u[0]?.url,m=(0,N.Z)(p||null),F=(0,g.I0)(),[_,z]=(0,i.useState)(s.state===A.sY.Completed),{spec:K,logger:W}=(0,M.fU)(x.createDesktopAudiobookChapterEventFactory,{data:{uri:a}}),{triggerPlay:J,togglePlay:Z,isPlaying:H,isActive:q}=(0,w.n)({uri:a},{featureIdentifier:"chapter"}),X=(0,E.Y)((e=>(0,D.k)(e)??void 0)),Y=(0,O.S)(e),{badges:$}=(0,R.r)({contentRating:n?.label}),V=(0,i.useCallback)((e=>{!l.playable&&$.nineteen&&(e.stopPropagation(),F((0,y.RM)(a||"")))}),[a,l.playable,$.nineteen,F]),G=c.uri,Q=function(e){const t=r().from(e);return`/show/${r().hexToId(t?.id||"")}`}(G),te=(0,i.useCallback)((()=>{const e=K.headerFactory().audiobookLinkFactory().hitUiNavigate({destination:Q});W.logInteraction(e)}),[W,Q,K]),ae=(0,i.useCallback)(((e,t)=>{const i=K.actionBarFactory().downloadButtonFactory();t===U.mc.ADD?W.logInteraction(i.hitDownload({itemToDownload:a})):t===U.mc.REMOVE?W.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===U.mc.NO_PERMISSION&&W.logInteraction(i.hitUiReveal())}),[W,K,a]),ce=(0,i.useCallback)((()=>{const e=K.actionBarFactory().contextMenuButtonFactory().hitUiReveal();W.logInteraction(e)}),[W,K]),de=(0,i.useCallback)((()=>{const e=K.allChaptersLinkFactory().hitUiNavigate({destination:Q});W.logInteraction(e)}),[W,Q,K]),ue=!Y&&!l.playable,pe=c.name,me=d.ag.get("tracklist.a11y.play",t,pe),ge=d.ag.get("tracklist.a11y.pause",t,pe);return(0,ee.jsxs)("section",{"data-testid":"chapter",className:ne,children:[(0,ee.jsxs)(f.gF,{backgroundColor:m,children:[(0,ee.jsx)(P.W,{children:(0,ee.jsx)(C.i,{text:t})}),(0,ee.jsx)("div",{className:oe,children:(0,ee.jsx)(I._,{menu:(0,ee.jsx)(j.r,{uri:a,isPlayed:_,onMarkAsPlayed:z,contextUri:a,isLocked:Y}),children:(0,ee.jsx)(f.Oe,{loading:"eager",name:t,images:u,placeholderType:"episode",shape:f.Kc.ROUNDED_CORNERS})})}),(0,ee.jsxs)(f.sP,{children:[(0,ee.jsx)(f.dy,{small:!0,uppercase:!0,children:d.ag.get("web-player.audiobooks.chapter")}),(0,ee.jsx)(I._,{menu:(0,ee.jsx)(j.r,{uri:a,isPlayed:_,onMarkAsPlayed:z,contextUri:a,isLocked:Y}),children:(0,ee.jsx)(f.xd,{dragUri:a,dragLabel:t,children:(0,ee.jsx)("span",{"data-testid":"chapterTitle",children:t})})}),(0,ee.jsx)(I._,{menu:(0,ee.jsx)(j.r,{uri:a,isPlayed:_,onMarkAsPlayed:z,contextUri:a,isLocked:Y}),children:(0,ee.jsx)(v.Z,{to:Q,onClick:te,children:(0,ee.jsx)(f.dy,{large:!0,bold:!0,children:(0,ee.jsx)("span",{"data-testid":"bookTitle",children:pe})})})})]})]}),(0,ee.jsxs)(b.o,{backgroundColor:m,children:[(0,ee.jsxs)(b.F,{children:[$.nineteen&&(0,ee.jsx)(S.X,{className:re,size:16}),(0,ee.jsx)(L.E,{size:L.$.LARGE,fullyPlayed:_,durationMs:o.milliseconds,resumePositionMs:s.playPositionMilliseconds,isPlaying:H,position:q&&X||void 0})]}),(0,ee.jsxs)(b.F,{children:[(0,ee.jsx)("div",{onClick:V,children:(0,ee.jsx)(ie,{chapterUri:a,showUri:G,isLocked:Y,durationMs:o.milliseconds,playPositionMs:s.playPositionMilliseconds,isPlayDisabled:ue,isActive:q,isPlaying:H,togglePlay:Z,triggerPlay:J,playButtonPlayLabel:me,playButtonPauseLabel:ge,logger:W,event:K.actionBarFactory().playButtonFactory()})}),!Y&&(0,ee.jsx)(se.o,{uri:a,bookUri:G,onClick:ae}),!Y&&(0,ee.jsx)(T.yj,{menu:(0,ee.jsx)(j.r,{uri:a,isPlayed:_,onMarkAsPlayed:z,contextUri:a,isLocked:Y}),children:(0,ee.jsx)(k.z,{label:d.ag.get("more.label.context",t),onClick:ce})})]})]}),(0,ee.jsx)("div",{className:"contentSpacing",children:(0,ee.jsx)(h.P,{buttonSize:"sm",href:G,component:B.Z,className:le,onClick:de,children:d.ag.get("web-player.audiobooks.seeAllChapters")})})]})}));var de=a(99922),ue=a(74849);const pe=(0,i.lazy)((()=>Promise.all([a.e(1814),a.e(8396)]).then(a.bind(a,88396))));function me(e){const t=(0,ue.m)(),a=(0,de.o)();return t?(0,ee.jsx)(i.Suspense,{fallback:!0,children:(0,ee.jsx)(pe,{reason:"Episode page",...a,...e})}):null}const ge="dpN5ViPOceUWNB5EQPHN",he="vBcxPq3E2okwgXOkVPEM",xe="HCCBXwdFvq6omWW2hR0N",ye="bJOPO5Zo7dpjSVDwEpSw",be="TXdDDpokVTyJzDEDWHHf",ke="HaSbtEVJnxBsaJ5SRi0M",je="YldGldlfaI9myEGXQf9g",fe="qJHVIpJn1vLPWsAKfTEZ",Pe="wSIzjkVlr0Zdy7di2vRm",Ce="hYS_K1NATGyWt6tCSRqQ",ve="hVVaM4pF9arpQ8Nvn2a1",Ne="zf0Eac1LugsHUacz74Zf",Te="TnNaqxbaI0hzhBQZ7wE0",Ie="zSw1lG1TNe_xm6KTqtCv",Se="MlEQDkXnjdKKJueJ9kkB",Ue="jg0xlyD1yjh0DPNG6eOg",we="QiHXpFb4dLZNOFe5gpp3";var Ee=a(97656),De=a(49207);const Me=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,o.W6)(De.vp)?(0,ee.jsxs)("div",{className:je,children:[(0,ee.jsxs)("div",{className:fe,children:[(0,ee.jsx)(K.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,ee.jsx)(K.D,{semanticColor:"textBase",children:t})]}),(0,ee.jsx)(J.D,{buttonSize:"sm",colorSet:"invertedLight",href:r().from(i).toURLPath(!0),component:B.Z,children:a})]}):null,Ae=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:s,htmlDescription:n,onExpanded:r,onTimeStampClick:o,playability:l,showHeader:c=!0,spec:u})=>{const p=(0,M.$P)(),m=(s||t)&&c,g=(0,i.useCallback)((e=>{const t=u.readMoreButtonFactory();p.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[u,p,r]);return(0,ee.jsxs)(ee.Fragment,{children:[m&&(0,ee.jsx)(K.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:xe,children:d.ag.get("episode.description-title")}),t&&(0,ee.jsx)(Me,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),s&&(0,ee.jsx)(Ee.o,{className:he,onTimeStampClick:o,maxLines:4,onExpanded:g,content:(a||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:l.playable})]})};var Le,Re=a(94184),Oe=a.n(Re),Be=a(97650),Fe=a(29325),_e=a(61102),ze=a(3822),Ke=a(13406),We=a(32648);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(Le||(Le={}));const Je=i.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:a,spec:s}){const n=(0,M.$P)(),[r,o]=(0,i.useState)(Le.DESCRIPTION),{scrollNodeRef:l}=i.useContext(We.VX),{ref:c,inView:u}=(0,Be.YD)({threshold:[1],root:l.current,rootMargin:`-${Ke.K1+1}px 100000px 0px 100000px`}),p=(0,i.useRef)(null),m=(0,i.useCallback)((e=>{p.current=e,c(e)}),[c]);return(0,i.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const a=e-Ke.K1;t.scrollTop>a&&t.scrollTo({top:a})}),[l,r]),(0,ee.jsx)(Fe.l,{list:(0,ee.jsxs)(_e.F,{className:Oe()(Se,{[Ue]:!u}),ref:m,children:[(0,ee.jsx)(ze.c,{label:d.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===Le.DESCRIPTION,onClick:()=>{const e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Le.DESCRIPTION)},className:Oe()(we,{[Pe]:r===Le.DESCRIPTION})}),(0,ee.jsx)(ze.c,{label:d.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===Le.TRANSCRIPT,onClick:()=>{const e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(Le.TRANSCRIPT)},className:Oe()(we,{[Pe]:r===Le.TRANSCRIPT})})]}),children:null===e||r===Le.DESCRIPTION?t:a})}));var Ze=a(43914),He=a(49104);const qe=(0,i.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:a}){return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("div",{className:ve,children:(0,ee.jsx)(K.D,{variant:"viola",semanticColor:"textBase",children:d.ag.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,i)=>{const s=`transcript-section-${i}`;return(0,ee.jsxs)("div",{className:Ce,children:[(0,ee.jsx)("button",{className:Ne,onClick:()=>{t(e.startMs,s)},children:(0,ee.jsx)(Ze.D,{id:s,targetURI:r().from(a),fadeOut:!0,children:(0,ee.jsx)(K.D,{variant:"finaleBold",semanticColor:"textSubdued",className:Te,children:(0,He.m)(e.startMs)})})}),e.content.map(((e,t)=>(0,ee.jsx)(K.D,{variant:"viola",semanticColor:"textBase",className:Ie,dir:"auto",children:e},`transcript-text-${t}`)))]},s)}))]})}));var Xe=a(74600),Ye=a(63766),$e=a(86543),Ve=a(38470),Ge=a(1848),Qe=a(88214),et=a(21509),tt=a(82760),at=a(86064),it=a(42922);const st="OYehkMWcGJRKPkByp46K",nt="uc1bXkrZqrCz0CMK4lBb",rt="qZeibBbA3SVClzEueYND",ot=({episodeUri:e,index:t,duration:a,start:s,stop:n,name:r,uri:o,artists:l,album:c,playable:u})=>{const{isActive:p,isPlaying:m,onClick:g}=(0,at.k)({episodeUri:e,start:s,stop:n}),h=(0,i.useCallback)(((e,t)=>{g(t)}),[g]),{spec:x}=(0,M.fU)(Ge.createDesktopTrackListRowEventFactory,{data:{position:t,reason:"",uri:o}});return(0,ee.jsx)(it.ZP,{value:"row",index:t,children:(0,ee.jsx)(T.xV,{trigger:"right-click",action:"open",menu:(0,ee.jsx)(Qe.$,{uri:o}),children:(0,ee.jsxs)(tt.c,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:h,isActive:p,isPlayable:u,spec:x,children:[(0,ee.jsxs)(et.vZ,{ariaColIndex:0,children:[(0,ee.jsx)(et.Du,{uri:o,playAriaLabel:d.ag.get("tracklist.a11y.play",r,l?.[0].name),onClick:h,isPlaying:m,isActive:p,spec:x,children:(0,ee.jsx)(et.km,{children:(0,ee.jsx)("img",{className:nt,src:c.image,alt:c.name})})}),(0,ee.jsxs)(et.vm,{children:[(0,ee.jsx)(et.Wh,{titleText:r,children:r}),(0,ee.jsx)(et.K9,{children:(0,ee.jsx)(et.T6,{artists:l,spec:x})})]})]}),(0,ee.jsx)(et.UA,{ariaColIndex:1,children:(0,ee.jsx)(et.BM,{uri:c.uri,name:c.name,spec:x,children:c.name})}),(0,ee.jsxs)(et.mU,{ariaColIndex:2,children:[(0,ee.jsx)(et.qS,{uri:o,spec:x}),(0,ee.jsx)(et.A$,{duration:a}),(0,ee.jsx)(et.Zv,{spec:x,menu:(0,ee.jsx)(Qe.$,{uri:o,artists:l}),label:d.ag.get("more.label.track",r,l?.[0].name)})]})]})})})};function lt(e,t,a){return e.reduce(((e,i,s)=>((s>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===i.type?e.push(function(e,t,a){return{type:"MUSIC",index:t,uri:a.uri,episodeUri:e,start:a.start,stop:a.stop,duration:a.duration,name:a.track.name,artists:a.track.artists,album:a.track.album,playable:a.track.playable}}(a,s,i)):"TALK"===i.type&&e.push(function(e,t,a){return{type:"TALK",index:t,uri:e,title:a.title,subtitle:a.subtitle,start:a.start,stop:a.stop,duration:a.duration,showUri:a.show.uri,showName:a.show.name}}(a,s,i)),e)),[])}const ct=({uri:e,segmentCount:t})=>{const a=(0,$e.G)(),s=(0,i.useCallback)((async(i,s)=>{const n=Math.ceil(i/2);try{return{items:lt(await a.getSegments(e,n,s),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,a,e]),n=(0,i.useCallback)((t=>{switch(t.type){case"SPACER":return(0,ee.jsx)("div",{className:rt},t.id);case"MUSIC":return(0,ee.jsx)(ot,{...t},`${e}-${t.index}`);case"TALK":return(0,ee.jsx)(Xe.t,{...t},`${e}-${t.index}`);default:return(0,Ve.U)(t)}}),[e]),r=d.ag.get("music_and_talk.in_this_episode");return(0,ee.jsxs)("div",{children:[(0,ee.jsx)(K.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:st,children:r}),(0,ee.jsx)(Ye.Pv,{ariaLabel:r,hasHeaderRow:!0,rowPlaceholder:Ye.hU,columns:[Ye.QD.TITLE,Ye.QD.ALBUM_OR_SHOW,Ye.QD.DURATION],renderRow:n,fetchTracks:s,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})};var dt=a(43720),ut=a.n(dt),pt=a(62100),mt=a.n(pt);let gt;function ht(e){switch(e){case 0:case"UNKNOWN":return gt.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return gt.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return gt.MUSIC_TRACK;default:return gt.UNRECOGNIZED}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(gt||(gt={}));const xt={encode(e,t=mt().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const a of e.sections)yt.encode(a,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const a=e instanceof mt().Reader?e:new(mt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;a.pos<i;){const e=a.uint32();switch(e>>>3){case 1:s.version=a.string();break;case 2:s.episodeUri=a.string();break;case 3:s.publishedAt=a.string();break;case 4:s.sections.push(yt.decode(a,a.uint32()));break;case 5:s.language=a.string();break;case 6:s.curated=a.bool();break;default:a.skipType(7&e)}}return s},fromJSON:e=>({version:jt(e.version)?String(e.version):"",episodeUri:jt(e.episodeUri)?String(e.episodeUri):"",publishedAt:jt(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>yt.fromJSON(e))):[],language:jt(e.language)?String(e.language):"",curated:!!jt(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?yt.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>yt.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const yt={encode:(e,t=mt().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&bt.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&kt.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&bt.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const a=e instanceof mt().Reader?e:new(mt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;a.pos<i;){const e=a.uint32();switch(e>>>3){case 1:s.type=a.int32();break;case 2:s.startMs=a.int32();break;case 3:s.plaintextContent=bt.decode(a,a.uint32());break;case 6:s.musicTrack=kt.decode(a,a.uint32());break;case 4:s.title=a.string();break;case 5:s.fallback=bt.decode(a,a.uint32());break;default:a.skipType(7&e)}}return s},fromJSON:e=>({type:jt(e.type)?ht(e.type):0,startMs:jt(e.startMs)?Number(e.startMs):0,plaintextContent:jt(e.plaintextContent)?bt.fromJSON(e.plaintextContent):void 0,musicTrack:jt(e.musicTrack)?kt.fromJSON(e.musicTrack):void 0,title:jt(e.title)?String(e.title):"",fallback:jt(e.fallback)?bt.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case gt.UNKNOWN:return"UNKNOWN";case gt.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case gt.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?bt.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?kt.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?bt.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?bt.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?kt.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?bt.fromPartial(e.fallback):void 0,t}};const bt={encode(e,t=mt().Writer.create()){for(const a of e.plaintext)t.uint32(10).string(a);return t},decode(e,t){const a=e instanceof mt().Reader?e:new(mt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={plaintext:[]};for(;a.pos<i;){const e=a.uint32();if(e>>>3==1)s.plaintext.push(a.string());else a.skipType(7&e)}return s},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const kt={encode:(e,t=mt().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const a=e instanceof mt().Reader?e:new(mt().Reader)(e);let i=void 0===t?a.len:a.pos+t;const s={uri:""};for(;a.pos<i;){const e=a.uint32();if(e>>>3==1)s.uri=a.string();else a.skipType(7&e)}return s},fromJSON:e=>({uri:jt(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function jt(e){return null!=e}function ft(e){return e.type===gt.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}mt().util.Long!==ut()&&(mt().util.Long=ut(),mt().configure());const Pt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:s,hasMusicAndTalkSegements:n,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:l,onTranscriptTimestampClick:c,playability:u,segmentCount:p,showUrl:m,transcript:g,transcriptEnabled:x,uri:y,spec:b})=>{const k=(0,M.$P)(),j=(0,i.useMemo)((()=>b.descriptionSectionFactory()),[b]),f=(0,i.useMemo)((()=>j.trackListFactory()),[j]),[P,C]=(0,i.useState)(null),v=(0,i.useCallback)((async e=>{const t=await async function(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer();return xt.decode(new Uint8Array(e)).sections.map(ft)}return null}catch(e){return null}}(e);C(t)}),[]);(0,i.useEffect)((()=>{g&&g.length>0&&v(g[0].cdnUrl)}),[v,g]);const N=i=>(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ae,{hasDescription:s,contentInformation:t,onTimeStampClick:l,onExpanded:o,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:u,showHeader:i,spec:j}),n&&(0,ee.jsx)(M.Nh,{spec:f,children:(0,ee.jsx)(ct,{segmentCount:p,uri:y})}),m&&(0,ee.jsx)(h.P,{buttonSize:"sm",className:ye,href:m,component:B.Z,onClick:()=>{k.logInteraction(j.allEpisodesLinkFactory().hitUiNavigate({destination:m}))},children:d.ag.get("episode.see_all_episodes")}),(0,ee.jsx)(me,{uri:y})]});return(0,ee.jsx)(ee.Fragment,{children:x&&g&&g?.length>0?(0,ee.jsx)(Je,{transcriptSections:P,descriptionContent:N(!1),transcriptContent:(0,ee.jsx)(qe,{transcriptSections:P||[],onTimeStampClick:c,episodeUri:y}),spec:b}):N(!0)})};var Ct=a(88435),vt=a(87093);const Nt="activation-trigger-mme",Tt=({episodeUri:e,showUri:t,isLocked:a,isPlaying:i,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:o,onClick:l})=>{const c=(0,vt.E)();if((0,F.g)())return(0,ee.jsx)(_.JM,{size:_.qE.lg,onClick:l,isPlaying:i,disabled:s,locked:a,ariaPlayLabel:n,ariaPauseLabel:o});const d=(0,ee.jsx)(Ct.l,{showUri:t,enabled:a,renderInline:!1,children:(0,ee.jsx)(_.JM,{size:_.qE.lg,onClick:l,isPlaying:i,disabled:s,locked:a,ariaPlayLabel:n,ariaPauseLabel:o})});return c?(0,ee.jsx)(Ze.D,{id:Nt,targetURI:r().from(e),fadeOut:!0,children:d}):d};var It=a(74414),St=a(31990);const Ut="o6AdXY67I_0xmTg8LBCI",wt="MMZAjWZzcPpNIE06SNuf",Et="Ccgbgvk9PwclKl5rA6Zj",Dt="NHVXJRN6IZANogQjMWei",Mt="orBUEK6aY0SZVOnrDerw",At="ym1d5PDeTaJLIK0SspBF",Lt="Hko6tpIRefr4NKiTEemO",Rt="ptUwXq9IK8IQAOE2UiDA",Ot="mpyCCCudeQ3uBmgrSAcA",Bt=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,o.W6)(De.vp)?(0,ee.jsxs)("div",{className:Lt,children:[(0,ee.jsxs)("div",{className:Rt,children:[(0,ee.jsx)(K.D,{variant:"balladBold",semanticColor:"textBase",children:e}),(0,ee.jsx)(K.D,{semanticColor:"textBase",children:t})]}),(0,ee.jsx)(J.D,{buttonSize:"sm",colorSet:"invertedLight",href:r().from(i).toURLPath(!0),component:B.Z,children:a})]}):null,Ft=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:s,onExpanded:n,onTimeStampClick:r,playability:o,showHeader:l=!0})=>{const c=(i||t)&&l;return(0,ee.jsxs)(ee.Fragment,{children:[c&&(0,ee.jsx)(K.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Et,children:d.ag.get("episode.description-title")}),t&&(0,ee.jsx)(Bt,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&(0,ee.jsx)(Ee.o,{className:wt,onTimeStampClick:r,maxLines:4,onExpanded:n,content:(a||"").trim(),htmlContent:e&&s?s:void 0,enableTimestamps:o.playable})]})},_t=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:s,onExpanded:n,onTimeStampClick:r,playability:o,showUrl:l,uri:c,seeAllButtonClick:u})=>{return p=!0,(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ft,{hasDescription:i,contentInformation:t,onTimeStampClick:r,onExpanded:n,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:s,playability:o,showHeader:p}),l&&(0,ee.jsx)(h.P,{onClick:u,buttonSize:"sm",className:Dt,href:l,component:B.Z,children:d.ag.get("episode.see_all_episodes")}),(0,ee.jsx)(me,{uri:c})]});var p};var zt=a(82627);const Kt="activation-trigger-mme",Wt=({episodeUri:e,showUri:t,isLocked:a,isPlaying:i,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:o,onClick:l})=>{const c=(0,vt.E)(),d=(0,ee.jsx)(Ct.l,{showUri:t,enabled:a,renderInline:!1,children:(0,ee.jsx)(zt.f,{size:"lg",onClick:l,isPlaying:i,disabled:s,locked:a,ariaPlayLabel:n,ariaPauseLabel:o})});return c?(0,ee.jsx)(Ze.D,{id:Kt,targetURI:r().from(e),fadeOut:!0,children:d}):d};var Jt=a(26492),Zt=a(80219),Ht=a(61901),qt=a(53538),Xt=a(23716),Yt=a(69691),$t=a(37483),Vt=a(89744),Gt=a(95134),Qt=a(20246),ea=a(87257),ta=a(52759);const aa=({podcastShort:e,onPlayEpisode:t,isPlaying:a,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,onDownloadClick:c,onContextMenuClick:u})=>{const{uri:p,playedState:m,contentRating:h,playability:x}=e,j=(0,g.I0)(),[f]=(0,ta.z)(1e4,(e=>e?.item?.uri===p)),P=(0,E.Y)((e=>e?.duration)),{badges:C,hasBadges:v}=(0,R.r)({contentRating:h?.label}),N=(0,i.useCallback)((e=>{!x.playable&&C.nineteen&&(e.stopPropagation(),j((0,y.RM)(p||"")))}),[p,x.playable,C.nineteen,j]),T=!l&&!e.playability.playable,I=d.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),U=d.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),w=e.podcast?.uri;return(0,ee.jsxs)(b.o,{backgroundColor:o,children:[(0,ee.jsxs)("div",{className:Ot,children:[v&&(0,ee.jsxs)(Gt.g,{children:[C.nineteen&&(0,ee.jsx)(S.X,{className:Mt,size:16}),C.explicit?(0,ee.jsx)(ea.N,{}):null]}),(0,ee.jsx)(b.F,{children:(0,ee.jsx)(L.E,{size:L.$.LARGE,fullyPlayed:n,durationMs:s&&P?P:e.duration.milliseconds,releaseDate:ra(e.releaseDate?.isoString),resumePositionMs:m.playPositionMilliseconds,isPlaying:a,position:s&&f||void 0})})]}),(0,ee.jsxs)(b.F,{children:[(0,ee.jsx)("div",{onClick:N,children:(0,ee.jsx)(Wt,{episodeUri:e.uri,showUri:w,isLocked:l,onClick:()=>{t(m.playPositionMilliseconds,!1)},isPlaying:a,isPlayDisabled:T,playButtonPlayLabel:I,playButtonPauseLabel:U})}),!l&&(0,ee.jsx)($t.p,{onClick:c,uri:e.uri,showUri:w}),(0,ee.jsx)(Qt.y,{onShow:u,menu:(0,ee.jsx)(Vt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:w,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r,userCreated:e.userCreated}),children:(0,ee.jsx)(k.z,{label:d.ag.get("more.label.context",e.name)})})]})]})};var ia=a(91355);const sa=({podcastShort:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i,spec:s})=>{const{uri:n,name:r,sharingInfo:o,playedState:l,episodeType:c,releaseDate:u,userCreated:p}=e,m=(0,M.$P)(),g=function(e,t,a,i,s){const n=t===A.Wf.Episode;return(0,ia.G3)(e,i,a,s)?(0,ee.jsx)(ia.Fg,{isMusicAndTalk:n}):n?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(n,c||A.Wf.Unknown,l.playPositionMilliseconds,ra(u?.isoString),l.state===A.sY.Completed),h=e.podcast?.uri;return(0,ee.jsxs)(f.gF,{backgroundColor:i,children:[(0,ee.jsx)(P.W,{children:(0,ee.jsx)(C.i,{text:e.name,dragUri:n,dragLabel:e.name})}),(0,ee.jsx)("div",{className:At,children:p?.userUri&&(0,ee.jsx)(I._,{menu:(0,ee.jsx)(Vt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:h,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:p}),children:(0,ee.jsx)(f.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:f.Kc.ROUNDED_CORNERS})})}),(0,ee.jsxs)(f.sP,{children:[(0,ee.jsx)(f.dy,{small:!0,uppercase:!0,children:g}),p?.userUri&&(0,ee.jsx)(I._,{menu:(0,ee.jsx)(Vt.v,{uri:n,sharingInfo:o,showUri:h,contextUri:n,isPlayed:t,onMarkAsPlayed:a,userCreated:p}),children:(0,ee.jsx)(f.xd,{dragUri:n,dragLabel:r,children:r})}),p?.userUri&&(0,ee.jsx)(I._,{menu:(0,ee.jsx)(Vt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:h,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:p}),children:(0,ee.jsx)(v.Z,{onClick:()=>{const e=s.hitUiNavigate({destination:p?.userUri??""});m.logInteraction(e)},to:p.userUri,children:(0,ee.jsx)(f.dy,{large:!0,bold:!0,children:(0,ee.jsx)("span",{"data-testid":"showTitle",children:p?.displayName})})})})]})]})},na=({podcastShort:e})=>{const{uri:t,episodeType:a,description:s,htmlDescription:n,podcastSubscription:l,segmentsCount:c,podcast:m,contentInformation:g,playedState:h,coverArt:x,userCreated:y}=e,{spec:b}=(0,M.fU)(St.createDesktopPodcastShortEventFactory,{data:{uri:t}}),k=i.useMemo((()=>b.userProfileLinkFactory({uri:t})),[b,t]),j=i.useMemo((()=>b.actionBarFactory()),[b]),[f,P]=(0,i.useState)(h.state===A.sY.Completed),C=(0,Xt.g)(),v=(0,Jt.o)(),N=(0,o.W6)(De.Cz),T=void 0!==c&&c>0,I=(0,F.g)(),{triggerPlay:S,togglePlay:U,isActive:D}=(0,w.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:L,isActive:R}=(0,Yt.$o)(t),O=x[0].url,B=(0,Ht.Zj)(O||null),_=(0,E.Y)((e=>e?.isPaused??void 0)),z=(0,vt.E)(),K=l?.isPaywalled&&!l.isUserSubscribed,W=(0,Zt.s)(e,m),J=(0,M.$P)(),Z=(0,i.useCallback)(((e,i=!0,s)=>{const n=()=>{_?C.resume():C.pause()};if(K)return;let r="play";if(!L||0!==e&&i||(r="pause"),v({intent:r,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===A.Wf.Episode&&z)p.y.set((()=>({triggerId:s||Kt,triggerAction:null})));else if(D&&!i)if(I)n();else{const e=(0,qt.aK)({isPlaying:L,isActive:R,spec:b.actionBarFactory().playButtonFactory(),logger:J,uri:t});U({loggingParams:e})}else R?n():I?W({seekTo:e}):S({seekTo:e})}),[K,L,v,t,R,b,J,U,a,z,D,_,C,I,W,S]),H=(0,i.useCallback)((()=>{(0,qt.qq)(j,J)}),[j,J]),q=(0,i.useCallback)(((e,a)=>{(0,qt.l7)(a,j.downloadButtonFactory(),J,t)}),[J,t,j]),X=(0,i.useCallback)((()=>{v({intent:"expand-description",type:"click"})}),[v]),Y=(0,i.useCallback)((()=>{const e=y?.userUri??"",t=b.seeAllEpisodesButtonFactory({uri:e}).hitUiNavigate({destination:e});J.logInteraction(t)}),[y,J,b]);(0,i.useEffect)((()=>{const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",i=1e3*parseInt(a,10);i<=e.duration.milliseconds&&Z(i)}}),[Z,e.duration.milliseconds]);const $=!!s||N&&!!n,V=e.podcast?.uri,G=r().from(V)?.toURLPath(!0);return(0,ee.jsxs)("section",{"data-testid":"episode",className:Ut,children:[(0,ee.jsx)(u.$,{children:d.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,ee.jsx)(sa,{podcastShort:e,isFullyPlayed:f,setIsFullyPlayed:P,backgroundColor:B,spec:k}),(0,ee.jsx)(aa,{podcastShort:e,onPlayEpisode:Z,isPlaying:L,isActive:R||D,isFullyPlayed:f,setIsFullyPlayed:P,backgroundColor:B,isLocked:!!K,onContextMenuClick:H,onDownloadClick:q}),(0,ee.jsx)("div",{className:"contentSpacing",children:(0,ee.jsx)(_t,{seeAllButtonClick:Y,hasDescription:$,contentInformation:g,onTimeStampClick:Z,onExpanded:X,description:e.description,areHTMLDescriptionsEnabled:N,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:T,segmentCount:c,uri:e.uri,showUrl:G})})]})};function ra(e){return e?.replace(/T.*/,"")||""}var oa=a(11486),la=a(52404),ca=a(86649),da=a(52586),ua=a(87834),pa=a(51871),ma=a(25988),ga=a(44065);const ha=({episode:e,onPlayEpisode:t,isPlaying:a,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:c})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,x=(0,M.$P)(),j=(0,g.I0)(),[f]=(0,ta.z)(1e4,(e=>e?.item?.uri===u)),P=(0,E.Y)((e=>e?.duration)),{badges:C}=(0,R.r)({contentRating:m?.label}),v=(0,i.useCallback)((e=>{!h.playable&&C.nineteen&&(e.stopPropagation(),j((0,y.RM)(u||"")))}),[u,h.playable,C.nineteen,j]),N=(0,i.useCallback)((()=>{const e=c.contextMenuButtonFactory().hitUiReveal();x.logInteraction(e)}),[x,c]),T=(0,i.useCallback)(((e,t)=>{(0,qt.l7)(t,c.downloadButtonFactory(),x,u)}),[x,c,u]),I=(0,i.useCallback)((e=>{const t=c.saveButtonFactory();x.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[x,c,u]),U=!l&&!e.playability.playable,w=d.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),D=d.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),A=e.podcast?.uri;return(0,ee.jsxs)(b.o,{backgroundColor:o,children:[(0,ee.jsxs)(b.F,{children:[C.nineteen&&(0,ee.jsx)(S.X,{className:be,size:16}),(0,ee.jsx)(L.E,{size:L.$.LARGE,fullyPlayed:n,durationMs:s&&P?P:e.duration.milliseconds,releaseDate:ka(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:a,position:s&&f||void 0})]}),(0,ee.jsxs)(b.F,{children:[(0,ee.jsx)("div",{onClick:v,children:(0,ee.jsx)(Tt,{episodeUri:e.uri,showUri:A,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:a,isPlayDisabled:U,playButtonPlayLabel:w,playButtonPauseLabel:D})}),!l&&(0,ee.jsx)($t.p,{uri:e.uri,showUri:A,onClick:T}),(0,ee.jsx)(pa.w,{uri:e.uri,size:ga.q.md,onClick:I}),(0,ee.jsx)(Qt.y,{onShow:N,menu:(0,ee.jsx)(ma.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:A,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,ee.jsx)(k.z,{label:d.ag.get("more.label.context",e.name)})})]})]})};const xa=({episode:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:s,spec:n})=>{const{uri:o,name:l,sharingInfo:c,playedState:u,episodeType:p,releaseDate:m}=e,g=(0,M.$P)(),h=function(e,t,a,i,s){const n=t===A.Wf.Episode;return(0,ia.G3)(e,i,a,s)?(0,ee.jsx)(ia.Fg,{isMusicAndTalk:n}):n?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(o,p||A.Wf.Unknown,u.playPositionMilliseconds,ka(m?.isoString),u.state===A.sY.Completed),x=e.podcast?.uri,y=function(e){const t=r().from(e);return`/show/${r().hexToId(t?.id||"")}`}(x),b=(0,i.useCallback)((()=>{g.logInteraction(n.podcastLinkFactory().hitUiNavigate({destination:y}))}),[g,y,n]);return(0,ee.jsxs)(f.gF,{backgroundColor:s,children:[(0,ee.jsx)(P.W,{children:(0,ee.jsx)(C.i,{text:e.name,dragUri:o,dragLabel:e.name})}),(0,ee.jsx)("div",{className:ke,children:(0,ee.jsx)(I._,{menu:(0,ee.jsx)(ma.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:x,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a}),children:(0,ee.jsx)(f.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:f.Kc.ROUNDED_CORNERS})})}),(0,ee.jsxs)(f.sP,{children:[(0,ee.jsx)(f.dy,{small:!0,uppercase:!0,children:h}),(0,ee.jsx)(I._,{menu:(0,ee.jsx)(ma.k,{uri:o,sharingInfo:c,showUri:x,contextUri:o,isPlayed:t,onMarkAsPlayed:a}),children:(0,ee.jsx)(f.xd,{dragUri:o,dragLabel:l,children:(0,ee.jsx)("span",{"data-testid":"episodeTitle",children:l})})}),(0,ee.jsx)(I._,{menu:(0,ee.jsx)(ma.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:x,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a}),children:(0,ee.jsx)(f.dy,{large:!0,bold:!0,children:(0,ee.jsx)(v.Z,{to:y,onClick:b,children:(0,ee.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})})})]})]})},ya=({episode:e})=>{const{uri:t,episodeType:a,description:s,htmlDescription:n,podcastSubscription:c,segmentsCount:m,podcast:g,contentInformation:h,playedState:x,coverArt:y}=e;(0,da.e)();const{spec:b,logger:k}=(0,M.fU)(l.createDesktopEpisodeEventFactory,{data:{uri:t}}),j=(0,i.useMemo)((()=>b.headerFactory()),[b]),f=(0,i.useMemo)((()=>b.actionBarFactory()),[b]),[P,C]=(0,i.useState)(x.state===A.sY.Completed),v=(0,Xt.g)(),N=(0,Jt.o)(),T=(0,o.W6)(De.Cz),I=void 0!==m&&m>0,S=(0,o.W6)(De.WE,{loadingValue:!1}),U=(0,F.g)(),{triggerPlay:D,togglePlay:L,isActive:R}=(0,w.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:O,isActive:B}=(0,Yt.$o)(t),_=y[0].url,z=(0,Ht.Zj)(_||null),K=(0,E.Y)((e=>e?.isPaused??void 0)),W=(0,vt.E)(),J=c.isPaywalled&&!c.isUserSubscribed,Z=B||R,H=(0,Zt.s)(e,g),q=(0,i.useCallback)(((e,i,s,n)=>{const r=()=>{K?(n?.("resume"),v.resume()):(n?.("pause"),v.pause())};if(J)return;let o="play";if(!O||0!==e&&i||(o="pause"),N({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===A.Wf.Episode&&W)p.y.set((()=>({triggerId:s||Nt,triggerAction:null})));else if(R&&!i)U?r():L({loggingParams:n?.()});else if(B&&!i)r();else{const t=n?.("play");U?H({seekTo:e,loggingParams:t}):D({seekTo:e,loggingParams:t})}}),[J,O,N,t,a,W,B,R,U,K,v,L,H,D]),X=(0,i.useCallback)((e=>{q(e,!1,void 0,(e=>{const a=b.actionBarFactory().playButtonFactory();let i;return i="pause"===e||O?a.hitPause({itemToBePaused:t}):"resume"===e||Z?a.hitResume({itemToBeResumed:t}):a.hitPlay({itemToBePlayed:t}),k.logInteraction(i)}))}),[q,Z,O,k,b,t]),Y=(0,i.useCallback)((e=>{q(e,!0,void 0,(()=>k.logInteraction(b.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[q,k,b,t]),$=(0,i.useCallback)(((e,a)=>{q(e,!0,a,(()=>k.logInteraction(b.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[q,k,b,t]),V=(0,i.useCallback)((()=>{N({intent:"expand-description",type:"click"})}),[N]);(0,i.useEffect)((()=>{if(e&&!Z){const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",i=1e3*parseInt(a,10);i<=e.duration.milliseconds&&q(i,!0)}}}),[e,Z]);const G=!!s||T&&!!n,Q=e.podcast?.uri,te=r().from(Q)?.toURLPath(!0);return(0,ee.jsxs)("section",{"data-testid":"episode",className:ge,children:[(0,ee.jsx)(u.$,{children:d.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,ee.jsx)(xa,{episode:e,isFullyPlayed:P,setIsFullyPlayed:C,backgroundColor:z,spec:j}),(0,ee.jsx)(ha,{episode:e,onPlayEpisode:X,isPlaying:O,isActive:Z,isFullyPlayed:P,setIsFullyPlayed:C,backgroundColor:z,isLocked:J,spec:f}),(0,ee.jsx)("div",{className:"contentSpacing",children:(0,ee.jsx)(Pt,{transcriptEnabled:S,transcript:e.transcript,hasDescription:G,contentInformation:h,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:$,onExpanded:V,description:e.description,areHTMLDescriptionsEnabled:T,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:I,segmentCount:m,uri:e.uri,showUrl:te,spec:b})})]})},ba=i.memo((function(){const{episodeId:e}=(0,s.UO)(),t=r().episodeURI(e).toURI(),a=(0,o.W6)(De.uB),n=(0,o.W6)(De.Nf),l=(0,o.W6)(De.IV,{loadingValue:!1}),u=(0,la.I)(t,a),p=(0,oa.V)("episode",u);return p?(0,ee.jsx)(It.o,{to:p}):u?(0,ca.Ey)(u)?l?(0,ee.jsx)(It.o,{to:r().from(u.book?.uri).toURLPath(!0)}):(0,ee.jsx)(i.Suspense,{fallback:null,children:(0,ee.jsx)(ua.C,{pageId:c.Wg.PODCAST_EPISODE_AUDIOBOOK,uri:t,children:(0,ee.jsx)(ce,{chapter:u})})}):(0,ca.Qj)(u)&&n?(0,ee.jsx)(i.Suspense,{fallback:null,children:(0,ee.jsx)(ua.C,{pageId:c.Wg.PODCAST_EPISODE,uri:t,children:(0,ee.jsx)(na,{podcastShort:u})})}):(0,ee.jsx)(i.Suspense,{fallback:null,children:(0,ee.jsx)(ua.C,{pageId:c.Wg.PODCAST_EPISODE,uri:t,children:(0,ee.jsx)(ya,{episode:u})})}):(0,ee.jsx)(m.h,{hasError:!1,errorMessage:d.ag.get("error.not_found.title.podcast")})}));function ka(e){return e?.replace(/T.*/,"")||""}},40080:(e,t,a)=>{a.d(t,{D:()=>s});var i=a(67294);function s(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e}),[e]),t.current}},13759:(e,t,a)=>{a.d(t,{E:()=>T,$:()=>N});var i=a(43315),s=a(67294);const n="wIA_5Ypq0rltNPeZQpM4",r="Swi6YtNEFCCVz8l4y75v",o="pklLPOhfigdytL9bPoth",l="sb24Y8kdMZInJ8aI8dXT";var c=a(85893);class d extends s.PureComponent{static defaultProps={current:0,max:1};render(){const{ariaValueText:e,max:t,current:a}=this.props,i=t&&a?100*Math.min(1,a/t):0,s={transform:`translateX(-${100-i}%)`},d=e||`${Math.round(i)}%`;return(0,c.jsxs)("div",{className:n,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":d,children:[(0,c.jsx)("div",{className:r}),(0,c.jsx)("div",{className:o,children:(0,c.jsx)("div",{"data-testid":"progressBarFg",className:l,style:s})})]})}}const u=d,p="qfYkuLpETFW3axnfMntO",m="jOd7lbjiyc_kvRJaAbeL",g="_q93agegdE655O5zPz6l",h="z7Yl7CIT1AB0y91f_moh",x="iLIlkUcfIq56KncGtX7u",y="nV50yZ6BR_TIuWP3l7b1",b="qLjIx_SzBEpDRA_q7kxQ";var k=a(32667),j=a(28066),f=a(96206),P=a(94184),C=a.n(P),v=a(29723);let N;!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(N||(N={}));const T=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:s,fullyPlayed:n,durationMs:r,size:o=N.SMALL,position:l=t}=e;return(0,c.jsxs)("div",{className:C()(p,{[m]:o===N.LARGE}),children:[a?(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:g,children:(0,i.rL)((0,i.RX)(a))}):null,(()=>{if(n&&!s)return(0,c.jsxs)("div",{className:x,children:[(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:h,children:f.ag.get("episode.played")}),(0,c.jsx)(j.N,{iconSize:16,className:b,"aria-hidden":"true"})]});if(l>0||s){const e=Math.ceil(Math.max(r-l,0));return(0,c.jsx)("div",{className:x,children:(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:h,children:(0,c.jsx)(v.ng,{durationMs:e})})})}return(0,c.jsx)(k.D,{as:"p",variant:"mesto",className:g,children:(0,c.jsx)(v.nL,{durationMs:r})})})(),!n&&l>0||s?(0,c.jsx)("div",{className:y,children:(0,c.jsx)(u,{current:l,max:r,isEnabled:!1})}):null]})}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map