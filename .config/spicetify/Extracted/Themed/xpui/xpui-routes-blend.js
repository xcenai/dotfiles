"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8123],{22578:(e,t,i)=>{i.d(t,{$:()=>m});var n=i(64593),l=i(96206),a=i(69691),o=i(8341),r=i(89952),s=i(67294),d=i(51615),c=i(24183);var u=i(85893);function h(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const m=({children:e,usePlayingItem:t})=>{let i=h(e);(e=>{const{mainLandmarkRef:t}=(0,c.Oh)(),i=(0,d.k6)(),n=i.location?.state?.preventMoveFocus,l=(0,s.useRef)(i.length<2);l.current=i.length<2,(0,s.useEffect)((()=>{const i=t.current;!n&&!l.current&&i&&e&&(i.setAttribute("aria-label",e),i.focus())}),[e,t,n])})(e);const{isPlaying:m}=(0,a.IK)(),b=(0,o.Y)((e=>e?.item));return b&&(m||t)&&((0,r.G_)(b)?i=[b.name,b.artists.map((e=>e.name)).join(l.ag.getSeparator())].join(" • "):(0,r.iw)(b)?i=[b.name,b.show.name].join(" • "):(0,r.k6)(b)&&(i=h(l.ag.get("ad-formats.advertisement")))),(0,u.jsx)(n.q,{defaultTitle:"Spotify",defer:!1,children:(0,u.jsx)("title",{children:i})})}},70369:(e,t,i)=>{i.d(t,{$:()=>n.$});var n=i(22578)},326:(e,t,i)=>{i.d(t,{l:()=>h});var n=i(32667),l=i(34011),a=i(18864),o=i(16367),r=i(85166),s=i(85893);const d={[a.Uo.MEDIUM]:"alto",[a.Uo.LARGE]:"alto",[a.Uo.XLARGE]:"forte"},c={[a.Uo.LARGE]:"ballad",[a.Uo.XLARGE]:"cello"},u={[a.Uo.LARGE]:"viola",[a.Uo.XLARGE]:"viola"},h=({title:e,subtitle:t,body:i,footnote:h,buttonText:m,callToActionClicked:b})=>{const x=(0,a.jh)(),g=x&&d[x]||"canon",v=x&&c[x]||"mesto",E=x&&u[x]||"finale";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.D,{as:"h1",variant:g,semanticColor:"textBase",className:r.Z.title,children:e}),(0,s.jsx)(n.D,{as:"h2",variant:v,semanticColor:"textSubdued",className:r.Z.subtitle,children:t}),i,b&&(0,s.jsx)(l.D,{className:r.Z.button,colorSet:"invertedLight",onClick:b,"data-testid":o.xd,children:m}),h&&(0,s.jsx)(n.D,{as:"p",variant:E,semanticColor:"textSubdued",className:r.Z.note,children:h})]})}},27887:(e,t,i)=>{i.d(t,{H:()=>E});var n=i(35150),l=i(96206),a=i(91552),o=i(70369),r=i(18864);const s="NTT5CathoDEMjrmgfv9y",d="WmmNhmwHDNvDxInfukYO";var c=i(85893);const u=e=>(0,c.jsx)("div",{className:s,children:(0,c.jsx)("div",{className:d,children:(0,c.jsx)("svg",{width:e.iconSize,height:e.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var h=i(326),m=i(16367),b=i(85166);const x={name:"",username:"",image_url:null,hash:""},g={[r.Uo.MEDIUM]:164,[r.Uo.LARGE]:164,[r.Uo.XLARGE]:270},v=(e,t)=>(0,c.jsx)(a.q,{label:l.ag.get("web-player.blend.invite.button-title"),images:[],width:e,userIconSize:t,customPlaceholder:(0,c.jsx)(u,{iconSize:t}),piled:!0}),E=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const s=!!e.members?.length,d=s&&e.members?.[0]||e.recipient||x,u=s&&e.recipient||null,E=(0,r.jh)(),p=E&&g[E]||128,j=Math.round(.475*p);return(0,c.jsxs)("div",{className:(0,n.cx)(b.Z.container,b.Z.TwoUsers),"data-testid":m.xS,ref:i,children:[(0,c.jsx)(o.$,{children:l.ag.get("blend.invite.page-title")}),(0,c.jsxs)("div",{className:b.Z.facepile,children:[(0,c.jsx)(a.q,{label:d.name,images:[{url:d.image_url??"",width:p,height:p}],width:p,userIconSize:j}),u?(0,c.jsx)(a.q,{label:u.name,images:[{url:u.image_url??"",width:p,height:p}],width:p,userIconSize:j,piled:!0}):v(p,j)]}),(0,c.jsx)(h.l,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,buttonText:e.button_text,callToActionClicked:t})]})}},16367:(e,t,i)=>{i.d(t,{Eh:()=>o,ab:()=>a,e0:()=>n,xS:()=>l,xd:()=>r});const n="blend-deleted-container",l="blend-two-user-container",a="blend-multi-user-container",o="blend-full-container",r="blend-cta-button"},80647:(e,t,i)=>{i.d(t,{Z:()=>n});const n=()=>{const e=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(e)}`,null}},22250:(e,t,i)=>{i.d(t,{Ag:()=>r,V3:()=>l,nW:()=>o,oN:()=>a});var n=i(16516);let l;!function(e){e.PENDING_INVITATION="PENDING_INVITATION",e.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",e.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",e.MAX_MEMBERS="MAX_MEMBERS",e.ALREADY_JOINED="ALREADY_JOINED",e.DELETED="DELETED"}(l||(l={}));const a=(e,t)=>e.build().withHost(n.cM).withPath(`/v3/view-invitation/${encodeURIComponent(t)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(e.locale).send(),o=(e,t)=>e.build().withHost(n.cM).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(t)}`).withEndpointIdentifier("join/{invitationId}").send(),r=e=>e.build().withHost(n.cM).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},52201:(e,t,i)=>{i.d(t,{j:()=>a});var n=i(82144),l=i(53052);const a=()=>(0,l.D)({[n.U.SMALL]:536,[n.U.MEDIUM]:792,[n.U.LARGE]:1048,[n.U.XLARGE]:1688})},60210:(e,t,i)=>{i.d(t,{i:()=>c});var n=i(86706),l=i(96206),a=i(87961),o=i(25853),r=i(51867),s=i(29255),d=i(22250);function c(){const{user:e}=(0,n.v9)(s.Gg),t=(0,r.k)();return async()=>{try{const i=await(0,d.Ag)(a.b.getInstance()),n=i.body?.invite;if(!n)throw new Error("unable to generate invite link");const r=e?.display_name?l.ag.get("blend.invite.body-with-name",e.display_name,i.body?.invite):l.ag.get("blend.invite.body-without-name",i.body?.invite);(0,o.v)(r),t(l.ag.get("feedback.link-copied"))}catch{t(l.ag.get("error.generic"))}}}},81070:(e,t,i)=>{i.r(t),i.d(t,{default:()=>E});var n=i(67294),l=i(86706),a=i(96206),o=i(70369),r=i(29255),s=i(18864),d=i(15429),c=i(49961),u=i(22250),h=i(52201),m=i(60210),b=i(27887),x=i(80647),g=i(85893);const v={page_type:u.V3.PENDING_INVITATION,get title(){return a.ag.get("web-player.blend.group-invite.header")},get subtitle(){return a.ag.get("web-player.blend.duo-invite.description")},get button_text(){return a.ag.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},E=()=>{const e=(0,m.i)(),{ref:t,breakpoint:i}=(0,h.j)(),{user:u}=(0,l.v9)(r.Gg),E=u?.uri?(0,d.C)(u?.uri):"",p=(e=>({...v,members:[e],footnote:a.ag.get("web-player.blend.group-invite.warning")}))({name:u?.display_name||"",username:E,image_url:(0,c.X)(u?.images)?.url||null,hash:""});return u?(0,g.jsxs)(n.Suspense,{fallback:null,children:[(0,g.jsx)(o.$,{children:a.ag.get("web-player.blend.invite.page-title")}),(0,g.jsx)(s.ZU.Provider,{value:i,children:(0,g.jsx)(b.H,{invitation:p,callToActionClicked:e,breakpointEltRef:t})})]}):(0,g.jsx)(x.Z,{})}},80417:(e,t,i)=>{i.r(t),i.d(t,{default:()=>J});var n=i(67294),l=i(86706),a=i(51615),o=i(29255),r=i(29634),s=i(69518),d=i.n(s),c=i(33661),u=i(87577),h=i(96206),m=i(87972),b=i(49207),x=i(18864),g=i(6158),v=i(22250),E=i(52201),p=i(60210),j=i(87961),f=i(51867);var w=i(15358),_=i(326),A=i(16367),I=i(85166),y=i(85893);const N=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>(0,y.jsxs)("div",{className:I.Z.container,"data-testid":A.Eh,ref:i,children:[(0,y.jsx)(w.Z,{iconSize:64}),(0,y.jsx)(_.l,{title:e.title,subtitle:e.subtitle,buttonText:e.button_text,footnote:null,callToActionClicked:t})]});var T=i(70369),k=i(94184),D=i.n(k),R=i(32667),U=i(91552),L=i(18261),M=i(43480),C=i(67892);const O="HKAYWYmxd5Ie8WSi0a4y",S="i52u_T3b50wraodIaORk",P="xakiNVMlUf6geF67FEgy",Z="IRhTesoeIiwswlly0Dvg",Y="LNJzE17iskXWmfKAzY4U",G="qzBr7X7cdLUhWdk0r8lL",V=({uri:e,imageUrl:t,name:i})=>(0,y.jsx)("li",{children:(0,y.jsx)(L._,{menu:(0,y.jsx)(M.I,{uri:e}),children:(0,y.jsx)(C.r,{to:e,children:(0,y.jsxs)("div",{className:Z,children:[(0,y.jsx)(U.q,{images:[{url:t,width:null,height:null}],label:i,width:32,userIconSize:24,className:Y}),(0,y.jsx)(R.D,{variant:"violaBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:i})]})})})}),B=({members:e,headingText:t,className:i})=>(0,y.jsxs)("div",{className:D()(O,i),children:[(0,y.jsx)("div",{children:(0,y.jsx)(R.D,{as:"h4",variant:"minuetBold",semanticColor:"textSubdued",className:S,children:t})}),(0,y.jsx)("ul",{className:P,children:e&&e.map((e=>(0,y.jsx)(V,{imageUrl:e.image_url||"",name:e.name,uri:d().profileURI(e.username).toURI()},e.username)))}),(0,y.jsx)("div",{className:G})]}),z=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=e.members||[],l=(0,y.jsx)("div",{className:I.Z.userListContainer,"data-testid":A.ab,children:(0,y.jsx)(B,{className:I.Z.userList,headingText:e.members_title,members:n})});return(0,y.jsxs)("div",{className:I.Z.container,ref:i,children:[(0,y.jsx)(T.$,{children:h.ag.get("blend.join.title")}),(0,y.jsx)(_.l,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,body:l,buttonText:e.button_text,callToActionClicked:t})]})};var X=i(27887);const q=({invitationId:e})=>{const t=(0,a.k6)(),i=(0,u.W6)(b.c$),{data:n,error:l,loading:o}=(0,m.J)(v.oN,[e]),r=(0,p.i)(),s=function(e){const t=(0,f.k)(),i=(0,a.k6)();return async()=>{try{const t=await(0,v.nW)(j.b.getInstance(),e),n=d().from(t?.body.playlist_uri).toURLPath(!0);if(!n)throw new Error("unable to join");i.replace(n)}catch{t(h.ag.get("error.request-playlist-failure"))}}}(e),{ref:w,breakpoint:T}=(0,E.j)(),k=null===n||!n.body;if(k||o||l)return(0,y.jsx)(g.h,{timeoutInMs:1e3,hasError:!!l||!o&&k,errorMessage:h.ag.get("error.generic")});const D=d().from(n?.body.playlist_uri)?.toURLPath(!0),R=n?.body.members?.length||0,U=i===b.rS.TWO_USER;switch(n?.body.page_type){case v.V3.DELETED:return(0,y.jsx)(x.ZU.Provider,{value:T,children:(0,y.jsxs)("div",{className:I.Z.container,ref:w,"data-testid":A.e0,children:[(0,y.jsx)(c.F,{iconSize:64}),(0,y.jsx)(_.l,{title:n.body.title,subtitle:n.body.subtitle,buttonText:n.body.button_text,footnote:n.body.footnote,callToActionClicked:r})]})});case v.V3.ALREADY_JOINED:return D&&t.replace(D),(0,y.jsx)(g.h,{hasError:!1,errorMessage:h.ag.get("error.request-playlist-failure")});case v.V3.READY_TO_JOIN_EMPTY_BLEND:return(0,y.jsx)(x.ZU.Provider,{value:T,children:(0,y.jsx)(X.H,{invitation:n.body,breakpointEltRef:w,callToActionClicked:s})});case v.V3.READY_TO_JOIN_ALREADY_CREATED_BLEND:return U&&R>=2?(0,y.jsx)(x.ZU.Provider,{value:T,children:(0,y.jsx)(N,{invitation:{...n.body,title:h.ag.get("blend.link-invialid.header"),subtitle:h.ag.get("blend.link-invalid.subtitle"),button_text:h.ag.get("blend.invite.button-title")},callToActionClicked:r,breakpointEltRef:w})}):(0,y.jsx)(x.ZU.Provider,{value:T,children:(0,y.jsx)(z,{invitation:n.body,callToActionClicked:s,breakpointEltRef:w})});case v.V3.MAX_MEMBERS:return(0,y.jsx)(x.ZU.Provider,{value:T,children:(0,y.jsx)(N,{invitation:n.body,callToActionClicked:r,breakpointEltRef:w})});case v.V3.PENDING_INVITATION:return(0,y.jsx)(x.ZU.Provider,{value:T,children:(0,y.jsx)(X.H,{invitation:n.body,callToActionClicked:r,breakpointEltRef:w})});default:return(0,y.jsx)(g.h,{timeoutInMs:1e3,hasError:!0,errorMessage:h.ag.get("error.generic")})}};var W=i(80647);const H=({invitationId:e})=>{const{user:t}=(0,l.v9)(o.Gg);return t?(0,y.jsx)(r.n,{fallback:null,children:(0,y.jsx)(q,{invitationId:e})}):(0,y.jsx)(W.Z,{})},J=n.memo((()=>(0,y.jsx)(H,{...(0,a.UO)()})))},85166:(e,t,i)=>{i.d(t,{Z:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}}}]);
//# sourceMappingURL=xpui-routes-blend.js.map